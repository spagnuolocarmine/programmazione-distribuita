<!DOCTYPE HTML>
<html lang="en" class="light" dir="ltr">
    <head>
        <!-- Book generated using mdBook -->
        <meta charset="UTF-8">
        <title>Programmazione Distribuita</title>
        <meta name="robots" content="noindex">


        <!-- Custom HTML head -->
        
        <meta name="description" content="materiale di supporto al corso di Programmazione Distribuita">
        <meta name="viewport" content="width=device-width, initial-scale=1">
        <meta name="theme-color" content="#ffffff">

        <link rel="icon" href="favicon.svg">
        <link rel="shortcut icon" href="favicon.png">
        <link rel="stylesheet" href="css/variables.css">
        <link rel="stylesheet" href="css/general.css">
        <link rel="stylesheet" href="css/chrome.css">
        <link rel="stylesheet" href="css/print.css" media="print">

        <!-- Fonts -->
        <link rel="stylesheet" href="FontAwesome/css/font-awesome.css">
        <link rel="stylesheet" href="fonts/fonts.css">

        <!-- Highlight.js Stylesheets -->
        <link rel="stylesheet" href="highlight.css">
        <link rel="stylesheet" href="tomorrow-night.css">
        <link rel="stylesheet" href="ayu-highlight.css">

        <!-- Custom theme stylesheets -->

    </head>
    <body class="sidebar-visible no-js">
    <div id="body-container">
        <!-- Provide site root to javascript -->
        <script>
            var path_to_root = "";
            var default_theme = window.matchMedia("(prefers-color-scheme: dark)").matches ? "navy" : "light";
        </script>

        <!-- Work around some values being stored in localStorage wrapped in quotes -->
        <script>
            try {
                var theme = localStorage.getItem('mdbook-theme');
                var sidebar = localStorage.getItem('mdbook-sidebar');

                if (theme.startsWith('"') && theme.endsWith('"')) {
                    localStorage.setItem('mdbook-theme', theme.slice(1, theme.length - 1));
                }

                if (sidebar.startsWith('"') && sidebar.endsWith('"')) {
                    localStorage.setItem('mdbook-sidebar', sidebar.slice(1, sidebar.length - 1));
                }
            } catch (e) { }
        </script>

        <!-- Set the theme before any content is loaded, prevents flash -->
        <script>
            var theme;
            try { theme = localStorage.getItem('mdbook-theme'); } catch(e) { }
            if (theme === null || theme === undefined) { theme = default_theme; }
            var html = document.querySelector('html');
            html.classList.remove('light')
            html.classList.add(theme);
            var body = document.querySelector('body');
            body.classList.remove('no-js')
            body.classList.add('js');
        </script>

        <input type="checkbox" id="sidebar-toggle-anchor" class="hidden">

        <!-- Hide / unhide sidebar before it is displayed -->
        <script>
            var body = document.querySelector('body');
            var sidebar = null;
            var sidebar_toggle = document.getElementById("sidebar-toggle-anchor");
            if (document.body.clientWidth >= 1080) {
                try { sidebar = localStorage.getItem('mdbook-sidebar'); } catch(e) { }
                sidebar = sidebar || 'visible';
            } else {
                sidebar = 'hidden';
            }
            sidebar_toggle.checked = sidebar === 'visible';
            body.classList.remove('sidebar-visible');
            body.classList.add("sidebar-" + sidebar);
        </script>

        <nav id="sidebar" class="sidebar" aria-label="Table of contents">
            <div class="sidebar-scrollbox">
                <ol class="chapter"><li class="chapter-item expanded "><a href="index.html"><strong aria-hidden="true">1.</strong> Programmazione Distribuita</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="blog.html"><strong aria-hidden="true">1.1.</strong> üîó Blog</a></li><li class="chapter-item expanded "><a href="esame_con_intercorso.html"><strong aria-hidden="true">1.2.</strong> üìù Esame: modalit√† con prove intercorso per studenti corsisti</a></li></ol></li><li class="chapter-item expanded "><div><strong aria-hidden="true">2.</strong> 1Ô∏è‚É£ üìï</div></li><li><ol class="section"><li class="chapter-item expanded "><div><strong aria-hidden="true">2.1.</strong> Presentazione del corso</div></li><li class="chapter-item expanded "><div><strong aria-hidden="true">2.2.</strong> Introduzione al calcolo distribuito</div></li><li class="chapter-item expanded "><div><strong aria-hidden="true">2.3.</strong> Java Thread 1</div></li></ol></li><li class="chapter-item expanded "><div><strong aria-hidden="true">3.</strong> 2Ô∏è‚É£ üìï</div></li><li><ol class="section"><li class="chapter-item expanded "><div><strong aria-hidden="true">3.1.</strong> Java Thread 2-3</div></li><li class="chapter-item expanded "><div><strong aria-hidden="true">3.2.</strong> laboratorio Java Thread</div></li><li class="chapter-item expanded "><div><strong aria-hidden="true">3.3.</strong> Java Socket TCP 1</div></li></ol></li><li class="chapter-item expanded "><div><strong aria-hidden="true">4.</strong> 3Ô∏è‚É£ üìï</div></li><li><ol class="section"><li class="chapter-item expanded "><div><strong aria-hidden="true">4.1.</strong> Java Socket TCP 2</div></li><li class="chapter-item expanded "><div><strong aria-hidden="true">4.2.</strong> Java Remote Method Invocation (RMI) 1</div></li><li><ol class="section"><li class="chapter-item expanded "><a href="03-rmi.html"><strong aria-hidden="true">4.2.1.</strong>  Hello World RMI</a></li></ol></li><li class="chapter-item expanded "><div><strong aria-hidden="true">4.3.</strong> RMI 2</div></li></ol></li><li class="chapter-item expanded "><div><strong aria-hidden="true">5.</strong> 4Ô∏è‚É£ üìïüìó</div></li><li><ol class="section"><li class="chapter-item expanded "><a href="03-rmi.html"><strong aria-hidden="true">5.1.</strong> Laboratorio Java RMI</a></li><li class="chapter-item expanded "><a href="04-javaee.html"><strong aria-hidden="true">5.2.</strong> Introduzione Java Enterprise Edition (Java EE)</a></li><li class="chapter-item expanded "><a href="04-cdi.html"><strong aria-hidden="true">5.3.</strong> Contexts and Dependency Injection (CDI) - Part 1</a></li></ol></li><li class="chapter-item expanded "><div><strong aria-hidden="true">6.</strong> 5Ô∏è‚É£ üìó</div></li><li><ol class="section"><li class="chapter-item expanded "><a href="05-javaee-lab.html"><strong aria-hidden="true">6.1.</strong> Laboratorio Java EE</a></li><li class="chapter-item expanded "><a href="04-cdi.html"><strong aria-hidden="true">6.2.</strong> Contexts and Dependency Injection (CDI) - Part 2</a></li><li class="chapter-item expanded "><a href="05-jpa.html"><strong aria-hidden="true">6.3.</strong> Java Persistence API - Part 1</a></li></ol></li><li class="chapter-item expanded "><div><strong aria-hidden="true">7.</strong> 6Ô∏è‚É£ üìó</div></li><li><ol class="section"><li class="chapter-item expanded "><a href="05-jpa.html"><strong aria-hidden="true">7.1.</strong> JPA 2</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="06-jpa-lab.html"><strong aria-hidden="true">7.1.1.</strong> Laboratorio JPA</a></li></ol></li><li class="chapter-item expanded "><a href="06-ejb.html"><strong aria-hidden="true">7.2.</strong> Enterprise JavaBeans (EJB) - Part 1</a></li></ol></li><li class="chapter-item expanded "><div><strong aria-hidden="true">8.</strong> 7Ô∏è‚É£ üìó</div></li><li><ol class="section"><li class="chapter-item expanded "><a href="06-ejb.html"><strong aria-hidden="true">8.1.</strong> EJB - Part 2</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="07-ejb-lab.html"><strong aria-hidden="true">8.1.1.</strong> Laboratorio EJB (Esercizio 0)</a></li></ol></li><li class="chapter-item expanded "><a href="07-jms.html"><strong aria-hidden="true">8.2.</strong> Java Message Service - Part 1</a></li><li class="chapter-item expanded "><a href="06-ejb.html"><strong aria-hidden="true">8.3.</strong> JMS - Part 2</a></li></ol></li><li class="chapter-item expanded "><div><strong aria-hidden="true">9.</strong> 8Ô∏è‚É£ üìó</div></li><li><ol class="section"><li class="chapter-item expanded "><a href="07-ejb-lab.html"><strong aria-hidden="true">9.1.</strong> Laboratorio EJB</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="08-jms-lab.html"><strong aria-hidden="true">9.1.1.</strong> JMS Lab</a></li></ol></li><li class="chapter-item expanded "><a href="08-ws.html"><strong aria-hidden="true">9.2.</strong> Java Web Services (WS) Parte 1</a></li><li class="chapter-item expanded "><a href="08-ws.html"><strong aria-hidden="true">9.3.</strong> Java WS Parte 2</a></li></ol></li><li class="chapter-item expanded "><div><strong aria-hidden="true">10.</strong> 9Ô∏è‚É£ üìó</div></li><li><ol class="section"><li class="chapter-item expanded "><a href="09-ws-lab.html"><strong aria-hidden="true">10.1.</strong> Laboratorio Java WS</a></li><li class="chapter-item expanded "><div><strong aria-hidden="true">10.2.</strong> Laboratorio J2EE Step-by-step</div></li><li class="chapter-item expanded "><div><strong aria-hidden="true">10.3.</strong> Introduzione al Cloud Computing</div></li></ol></li><li class="chapter-item expanded "><div><strong aria-hidden="true">11.</strong> 1Ô∏è‚É£0Ô∏è‚É£</div></li><li><ol class="section"><li class="chapter-item expanded "><div><strong aria-hidden="true">11.1.</strong> From J2EE to Spring Framework (Teoria)</div></li><li class="chapter-item expanded "><div><strong aria-hidden="true">11.2.</strong> From J2EE to Spring Framework (Pratica)</div></li></ol></li></ol>
            </div>
            <div id="sidebar-resize-handle" class="sidebar-resize-handle">
                <div class="sidebar-resize-indicator"></div>
            </div>
        </nav>

        <!-- Track and set sidebar scroll position -->
        <script>
            var sidebarScrollbox = document.querySelector('#sidebar .sidebar-scrollbox');
            sidebarScrollbox.addEventListener('click', function(e) {
                if (e.target.tagName === 'A') {
                    sessionStorage.setItem('sidebar-scroll', sidebarScrollbox.scrollTop);
                }
            }, { passive: true });
            var sidebarScrollTop = sessionStorage.getItem('sidebar-scroll');
            sessionStorage.removeItem('sidebar-scroll');
            if (sidebarScrollTop) {
                // preserve sidebar scroll position when navigating via links within sidebar
                sidebarScrollbox.scrollTop = sidebarScrollTop;
            } else {
                // scroll sidebar to current active section when navigating via "next/previous chapter" buttons
                var activeSection = document.querySelector('#sidebar .active');
                if (activeSection) {
                    activeSection.scrollIntoView({ block: 'center' });
                }
            }
        </script>

        <div id="page-wrapper" class="page-wrapper">

            <div class="page">
                                <div id="menu-bar-hover-placeholder"></div>
                <div id="menu-bar" class="menu-bar sticky">
                    <div class="left-buttons">
                        <label id="sidebar-toggle" class="icon-button" for="sidebar-toggle-anchor" title="Toggle Table of Contents" aria-label="Toggle Table of Contents" aria-controls="sidebar">
                            <i class="fa fa-bars"></i>
                        </label>
                        <button id="theme-toggle" class="icon-button" type="button" title="Change theme" aria-label="Change theme" aria-haspopup="true" aria-expanded="false" aria-controls="theme-list">
                            <i class="fa fa-paint-brush"></i>
                        </button>
                        <ul id="theme-list" class="theme-popup" aria-label="Themes" role="menu">
                            <li role="none"><button role="menuitem" class="theme" id="light">Light</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="rust">Rust</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="coal">Coal</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="navy">Navy</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="ayu">Ayu</button></li>
                        </ul>
                        <button id="search-toggle" class="icon-button" type="button" title="Search. (Shortkey: s)" aria-label="Toggle Searchbar" aria-expanded="false" aria-keyshortcuts="S" aria-controls="searchbar">
                            <i class="fa fa-search"></i>
                        </button>
                    </div>

                    <h1 class="menu-title">Programmazione Distribuita</h1>

                    <div class="right-buttons">
                        <a href="print.html" title="Print this book" aria-label="Print this book">
                            <i id="print-button" class="fa fa-print"></i>
                        </a>

                    </div>
                </div>

                <div id="search-wrapper" class="hidden">
                    <form id="searchbar-outer" class="searchbar-outer">
                        <input type="search" id="searchbar" name="searchbar" placeholder="Search this book ..." aria-controls="searchresults-outer" aria-describedby="searchresults-header">
                    </form>
                    <div id="searchresults-outer" class="searchresults-outer hidden">
                        <div id="searchresults-header" class="searchresults-header"></div>
                        <ul id="searchresults">
                        </ul>
                    </div>
                </div>

                <!-- Apply ARIA attributes after the sidebar and the sidebar toggle button are added to the DOM -->
                <script>
                    document.getElementById('sidebar-toggle').setAttribute('aria-expanded', sidebar === 'visible');
                    document.getElementById('sidebar').setAttribute('aria-hidden', sidebar !== 'visible');
                    Array.from(document.querySelectorAll('#sidebar a')).forEach(function(link) {
                        link.setAttribute('tabIndex', sidebar === 'visible' ? 0 : -1);
                    });
                </script>

                <div id="content" class="content">
                    <main>
                        <h1 id="programmazione-distribuita"><a class="header" href="#programmazione-distribuita">PROGRAMMAZIONE DISTRIBUITA</a></h1>
<h3 id="universit√†-degli-studi-di-salerno"><a class="header" href="#universit√†-degli-studi-di-salerno">Universit√† degli Studi di Salerno</a></h3>
<p><img src="https://img.shields.io/badge/Language-%F0%9F%87%AE%F0%9F%87%B9-yellow" alt="" />
<img src="https://img.shields.io/badge/cod-0512100021-orange" alt="" />
<img src="https://img.shields.io/badge/Platform-JAVA%20EE-brightgreen" alt="" /></p>
<h3 id="libri-di-testo"><a class="header" href="#libri-di-testo">Libri di testo</a></h3>
<ul>
<li>üìï <a href="https://ilmiolibro.kataweb.it/libro/informatica-e-internet/36104/programmazione-con-oggetti-distribuiti-java-rmi-2/">Programmazione con Oggetti Distribuiti: Java RMI</a></li>
<li>üìó <a href="https://www.amazon.it/Beginning-Java-Expert-Voice-English-ebook/dp/B00EO03GQM">Beginning Java EE 7</a></li>
</ul>
<h1 id="materiale"><a class="header" href="#materiale">Materiale</a></h1>
<div class="table-wrapper"><table><thead><tr><th>üóìÔ∏è</th><th>Lezione</th><th>Materiale</th><th>Riferimenti</th></tr></thead><tbody>
<tr><td>23/09/2024</td><td>Presentazione Corso + Introduzione Programmazione Distribuita (Prof. Scarano)</td><td></td><td>üìïCap. 1</td></tr>
<tr><td>26/09/2024</td><td>Programmazione Distribuita (Prof. Scarano) 1</td><td></td><td>üìïCap. 1</td></tr>
<tr><td>27/09/2024</td><td>Programmazione Distribuita (Prof. Scarano) 2</td><td></td><td>üìïCap. 1</td></tr>
<tr><td>30/09/2024 (pari-dispari)</td><td>Java Thread 1</td><td></td><td><a href="https://docs.oracle.com/javase/tutorial/essential/concurrency">Official Java Essential Concurrency</a> Insights: O'Reilly Java Threads (google it)</td></tr>
<tr><td>03/10/2024</td><td>Java Thread 2</td><td></td><td><a href="https://docs.oracle.com/javase/tutorial/essential/concurrency">Official Java Essential Concurrency</a></td></tr>
<tr><td>04/10/2024</td><td>Laboratorio Thread</td><td></td><td><a href="https://docs.oracle.com/javase/tutorial/essential/concurrency">Official Java Essential Concurrency</a></td></tr>
<tr><td>07/10/2024 (dispari-pari)</td><td>Java Socket TCP 1</td><td></td><td>üìïCap. 2</td></tr>
<tr><td>10/10/2024</td><td>Java Socket TCP 2</td><td><a href="04-javaee-lab.html">Installazione ambiente di sviluppo (solo prima sezione)</a></td><td>üìï Cap. 2</td></tr>
<tr><td>11/10/2024</td><td>RMI 1</td><td><a href="03-rmi.html">RMI 1 - Hello World</a></td><td>üìï Cap. 3</td></tr>
<tr><td>14/10/2024  (pari-dispari)</td><td>RMI 2</td><td></td><td>üìï Cap. 4</td></tr>
<tr><td>17/10/2024</td><td>Laboratorio Java RMI</td><td><a href="03-rmi.html">RMI - Esercizi Java RMI</a></td><td></td></tr>
<tr><td></td><td><em><em>Fine Parte A</em></em></td><td></td><td></td></tr>
<tr><td>18/10/2024</td><td>Introduzione Java Enterprise Edition (Java EE)</td><td><a href="04-javaee.html">Java EE</a></td><td>üìó Cap. 1</td></tr>
<tr><td><span style="color: gray;"></td><td></td><td></td><td></td></tr>
</tbody></table>
</div>
<h2 id="aa-20232024"><a class="header" href="#aa-20232024">A.A. 2023/2024</a></h2>
<div class="table-wrapper"><table><thead><tr><th></th><th></th><th></th><th></th></tr></thead><tbody>
<tr><td>XX/XX/20XX</td><td>Contexts and Dependency Injection (CDI)</td><td><a href="04-cdi.html">CDI Part 1</a></td><td>üìó Cap. 2</td></tr>
<tr><td>XX/XX/20XX</td><td>Laboratorio Starting with J2EE</td><td><a href="05-javaee-lab.html">J2EE Lab</a></td><td></td></tr>
<tr><td>XX/XX/20XX</td><td>CDI Interceptor</td><td><a href="04-cdi.html">CDI Part 2</a></td><td>üìó Cap. 2</td></tr>
<tr><td>XX/XX/20XX</td><td>Java Persistence API (JPA)</td><td><a href="05-jpa.html"> JPA - Part 1</a></td><td>üìó Cap. 4-5</td></tr>
<tr><td>XX/XX/20XX</td><td>Java Persistence API (JPA)</td><td><a href="05-jpa.html"> JPA - Part 2</a> <a href="06-jpa-lab.html">Laboratorio JPA</a></td><td>üìó Cap. 4-5</td></tr>
<tr><td>XX/XX/20XX</td><td>Enterprise JavaBeans (EJB) - Part 1</td><td><a href="06-ejb.html"> EJB - Part 1</a></td><td>üìó Cap. 7-9</td></tr>
<tr><td>XX/XX/20XX</td><td>EJB - Part 2 ‚ûï Laboratorio EJB (Esercizio 0)</td><td><a href="06-ejb.html"> EJB - Part 2</a> <a href="07-ejb-lab.html">EJB - Lab</a></td><td>üìó Cap. 7-9</td></tr>
<tr><td>XX/XX/20XX</td><td>Java Message Service (JMS) - Part 1 ‚ûï üìù Quiz Parte A</td><td><a href="07-jms.html"> JMS - Part 1</a></td><td>üìó Cap. 13</td></tr>
<tr><td>XX/XX/20XX</td><td>JMS - Part 2</td><td><a href="07-jms.html"> JMS - Part 2</a></td><td>üìó Cap. 13</td></tr>
<tr><td></td><td><em><em>Fine Parte B</em></em></td><td></td><td></td></tr>
<tr><td>XX/XX/20XX</td><td>Laboratorio EJB ‚ûï JMS</td><td><a href="07-ejb-lab.html">EJB - Lab</a> <a href="08-jms-lab.html">JMS - Lab</a></td><td></td></tr>
<tr><td>XX/XX/20XX</td><td>Java Web Services (WS) Parte 1</td><td><a href="08-ws.html">Java Web Services (WS) Parte 1</a></td><td>üìó Cap. 14</td></tr>
<tr><td>XX/XX/20XX</td><td>Java WS Parte 2</td><td><a href="08-ws.html">Java WS Parte 2</a></td><td>üìó Cap. 14</td></tr>
<tr><td></td><td><em><em>Fine Parte C</em></em></td><td></td><td></td></tr>
<tr><td>XX/XX/20XX</td><td>Laboratorio Java WS ‚ûï üìù Quiz Parte B</td><td><a href="09-ws-lab.html">Laboratorio Java WS</a></td><td></td></tr>
<tr><td>XX/XX/20XX</td><td>Introduzione al Cloud Computing</td><td></td><td><a href="https://github.com/spagnuolocarmine/programmazione-distribuita/raw/main/data/cloud_2023.pdf">Materiale cloud computing</a></td></tr>
<tr><td>XX/XX/20XX</td><td>Laboratorio J2EE Step-by-step</td><td></td><td></td></tr>
<tr><td>XX/XX/20XX</td><td>Laboratorio J2EE Step-by-step</td><td></td><td></td></tr>
<tr><td>XX/XX/20XX</td><td>Laboratorio J2EE Step-by-step</td><td></td><td></td></tr>
<tr><td>XX/XX/20XX</td><td>Laboratorio J2EE Step-by-step</td><td></td><td></td></tr>
<tr><td>XX/XX/20XX</td><td>From J2EE to Spring Framework (Teoria)</td><td></td><td><a href="https://github.com/spagnuolocarmine/programmazione-distribuita/raw/main/data/introduction_to_spring_citro_2023.pdf">Introduzione a Spring Framework</a></td></tr>
<tr><td>XX/XX/20XX</td><td>From J2EE to Spring Framework (Pratica)</td><td></td><td><a href="https://github.com/tizianocitro/pdtify">Spring Framework In Action</a></td></tr>
<tr><td>XX/XX/20XX</td><td>Laboratorio J2EE Step-by-step</td><td></td><td></td></tr>
<tr><td>XX/XX/20XX</td><td>Laboratorio J2EE Step-by-step</td><td></td><td></td></tr>
<tr><td>XX/XX/20XX</td><td>üìù Parte C</td><td></td><td></td></tr>
</tbody></table>
</div></span>
<!--  XX/XX/20XX | [Introduzione a Java Enterprise Edition](01-intro) | 
 XX/XX/20XX | [Context Dependency Injection (Introduzione - Esempio di CDI Bean)](02-cdi) | 
| **Week**|  **2**|
XX/XX/20XX | [Laboratorio Starting with J2EE ](03-lab-j2ee-intro) | 
XX/XX/20XX | [Context Dependency Injection (Interceptors)](02-cdi) | 
XX/XX/20XX | [Java Persistence API (JPA) - Parte 1](04-jpa) | 
| **Week**|  **3**|
XX/XX/20XX | [JPA - Parte 2](04-jpa) -  [Laboratorio JPA ](05-lab-jpa)| 
XX/XX/20XX | [Enterprise JavaBeans (EJB) - Parte 1](06-EJB) | 
XX/XX/20XX | [EJB - Parte 2](06-EJB) | 
| **Week**|  **4**|
XX/XX/20XX | [EJB Lab](07-lab-EJB) | 
XX/XX/20XX | [Java Messaging Service (JMS) API - Parte 1](08-JMS)| 
XX/XX/20XX | [JMS - Parte 2](08-JMS) & [JMS Lab](09-lab-JMS) | 
| **Week**|  **5**|
XX/XX/20XX | Laboratorio JPA + EJB + JMS  | 
XX/XX/20XX | [Web Services - Part 1](10-WS) | 
XX/XX/20XX | [Web Services - Part 2](10-WS) | 
| **Week**|  **6**|
XX/XX/20XX | [Web Services Lab](10-lab-WS)  | 
XX/XX/20XX | Esame Step by Step 1 | 
XX/XX/20XX | Esame Step by Step 2 | 
| **Week**|  **7**|
XX/XX/20XX | Simulazione Esame | 
| **Week**|  **9**|
XX/XX/20XX | Introduzione al Cloud Computing **AULA P3** |  -->
<!--XX/XX/20XX | Simulazione Esame 3 | 
XX/XX/20XX | Simulazione Esame 4 | 
| **Week**|  **7**|
XX/XX/20XX |  | 
XX/XX/20XX |  | 
XX/XX/20XX |  | 
| **Week**|  **8**|
XX/XX/20XX |  | 
XX/XX/20XX |  | -->
<hr />
<h1 id="informazioni-modalit√†-desame"><a class="header" href="#informazioni-modalit√†-desame">Informazioni modalit√† d'esame</a></h1>
<p><strong>Prova scritta</strong> ‚û°Ô∏è <strong>Svolgimento prova a casa</strong> ‚û°Ô∏è <strong>Consegna progetto</strong> ‚û°Ô∏è <strong>Prova orale</strong></p>
<h2 id="prova-scritta"><a class="header" href="#prova-scritta">Prova scritta</a></h2>
<p><strong>Date (da verificare su ESSE3)</strong></p>
<div class="table-wrapper"><table><thead><tr><th>üóìÔ∏è</th><th>üïò</th><th>üìç</th></tr></thead><tbody>
<tr><td>17/01/2025</td><td>09:00-12:00</td><td>P3/P4</td></tr>
<tr><td>07/02/2025</td><td>09:00-12:00</td><td>P3/P4</td></tr>
<tr><td>21/02/2025</td><td>09:00-12:00</td><td>P3</td></tr>
</tbody></table>
</div><!--
### Svolgimento della prova di esame durante il corso (relativa al primo appello) üõë **non definitivo**
1. üìù Prova a quiz Ottobre (Libro Programmazione con Oggetti Distribuiti: Java RMI)
2. üìù Prova a quiz Novembre (Libro Beginning Java EE 7)
3. üíª Prova di programmazione Dicembre (Applicazione Java Enterprise)
4. ‚öΩÔ∏è Risultati prima dello scritto del primo appello
5. üó£Ô∏è Esame orale al primo appello
-->
<p><strong>Note sullo svolgimento della prova scritta</strong></p>
<ul>
<li>Alla terminazione della prova scritta dovete scansionare il compito per poterlo svolgere a casa.</li>
<li>Ricordatevi di portare un congruo numero di fogli bianchi e almeno due penne. La commissione non vi consegner√† NULLA e voi non potrete assolutamente scambiarvi oggetti.</li>
<li>Il cellulare dovrete averlo con voi (Modalit√† aereo), non potrete alzarvi per recuperarlo dagli zaini.</li>
<li>Sul vostro cellulare dovr√† essere gi√† installata una qualunque app per la scansione del compito.</li>
<li>A compito terminato dovrete effettuarne la scansione usando il vostro cellulare. Dovrete a questo punto comunicare alla commissione di voler eseguire la scansione e successivamente procedere alla scansione senza muovervi dal vostro posto.</li>
</ul>
<p><strong>Suggerimenti utili</strong></p>
<ul>
<li>Scrivete in maniera chiara, senza troppe cancellature, seguite l‚Äôordine di progettazione indicato nella traccia e indentate correttamente il codice.</li>
<li>Rispondere alla domanda di teoria in maniera chiara, puntuale e precisa, eventuali argomenti non chiesti non verranno valutati.</li>
<li>Parti non implementate durante l‚Äôesame non dovranno essere consegnate nel progetto
import, getter, setter e toString si possono omettere nello scritto, ma i costruttori vanno implementati.</li>
</ul>
<h2 id="-svolgimento-prova-a-casa"><a class="header" href="#-svolgimento-prova-a-casa">‚û°Ô∏è Svolgimento prova a casa</a></h2>
<ul>
<li>
<p>I progetti da consegnare (progetti NetBeans) si devono chiamare ‚ÄúCOGNOMENOMEXXX‚Äù nei rispettivi files COGNOMENOMEXXX.zip (devono essere esportati).</p>
</li>
<li>
<p>L‚Äôarchivio che li contiene TUTTI insieme deve chiamarsi COGNOMENOME_EE.zip</p>
</li>
<li>
<p>Deve esserci un UNICO file readme.txt (non Readme, non leggimi, ‚Ä¶) all‚Äôinterno di COGNOMENOME_EE.zip che illustri le modifiche che si sono rese necessarie (per ogni file di ogni progetto) rispetto a quanto consegnato, secondo lo schema presente alla fine di questo documento.</p>
</li>
<li>
<p>Le modifiche devono essere commentate ANCHE nel codice dei progetti.</p>
<p><strong>Esempio file readme.txt</strong></p>
<pre><code>Cognome e Nome: XXXXXXX
Data: gg/mm/yy

Breve descrizione riassuntiva delle modifiche: 
xxxxxxxxx xxxxxxxxx
xxxxxxxxx xxxxxxxxx xxxxxxxxx xxxxxxxxx xxxxxxxxx 
xxxxxxxxx xxxxxxxxx
xxxxxxxxx xxxxxxxxx xxxxxxxxx xxxxxxxxx xxxxxxxxx 
xxxxxxxxx xxxxxxxxx
xxxxxxxxx xxxxxxxxx xxxxxxxxx xxxxxxxxx xxxxxxxxx 
------------------------------
MODIFICHE
PROGETTO: NOMEPROGETTO 1
FILE: xxxxxx
Linea 4: xxxxxxxxxx
Linea 34: xxxxxxxxxx
Linea 52: xxxxxxxxxx

FILE: yyyy
Linea 7: xxxxxxxxxx
Linea 13: xxxxxxxxxx
Linea 22: xxxxxxxxxx

PROGETTO: NOMEPROGETTO 2
FILE: xxxxxx
Linea 4: xxxxxxxxxx
Linea 34: xxxxxxxxxx
Linea 52: xxxxxxxxxx

FILE: yyyy
Linea 7: xxxxxxxxxx
Linea 13: xxxxxxxxxx
Linea 22: xxxxxxxxxx
...
</code></pre>
</li>
</ul>
<h2 id="-consegna-progetto"><a class="header" href="#-consegna-progetto">‚û°Ô∏è Consegna progetto</a></h2>
<ul>
<li>I progetti funzionanti, entro la data indicata sul compito, vanno inviati tramite il link che troverete sul compito o sulla piattaforma MS Teams.</li>
<li>‚ö†Ô∏è <strong>L‚Äôinvio dei progetti entro la data stabilita √® da considerarsi come richiesta di correzione (nel senso che se non viene inviato, il compito non viene corretto!).</strong></li>
</ul>
<h2 id="-prova-orale"><a class="header" href="#-prova-orale">‚û°Ô∏è Prova orale</a></h2>
<ul>
<li><em>Il calendario delle prove orali (per gli ammessi) sar√† comunicato su MS Teams per ogni appello.</em></li>
</ul>
<div style="break-before: page; page-break-before: always;"></div><h1 id="blog"><a class="header" href="#blog">Blog</a></h1>
<!-- - [ ] [The Ten Computer Science Superpowers üá¨üáß](cs-superpowers.md): frequently update.-->
<ul>
<li><input disabled="" type="checkbox" checked=""/>
<a href="https://github.com/spagnuolocarmine/programmazione-distribuita/raw/main/data/rmi_test_thread_safeness.zip">Test RMI Thread Safeness</a> ‚úÖ: importare i sorgenti in un nuovo progetto Java Application. Eseguire prima l'ogetto remoto <code>MessengerServiceImpl</code>e poi il file <code>Client</code>che esegue 50 clients in thread separati.</li>
<li><input disabled="" type="checkbox" checked=""/>
<a href="https://shortcutbuzz.com/netbeans-keyboard-shortcuts-180-quick-shortcuts/">Netbeans shortcuts and Java editor code template</a>: provare a digitare <code>psvm</code> oppure <code>sout</code> + Tab.</li>
<li><input disabled="" type="checkbox" checked=""/>
<a href="data/TSE_HAL.pdf">Z. Yu, C. Bai, L. Seinturier and M. Monperrus, "Characterizing the Usage, Evolution and Impact of Java Annotations in Practice," in IEEE Transactions on Software Engineering, vol. 47, no. 5, pp. 969-986, 1 May 2021, doi: 10.1109/TSE.2019.2910516</a></li>
<li><input disabled="" type="checkbox" checked=""/>
<a href="https://pepa.holla.cz/wp-content/uploads/2016/10/modern-java-ee-design-patterns.pdf">Modern Java EE Design Patterns - Building Scalable Architecture for Sustainable Enterprise Development</a> üìñ</li>
<li><input disabled="" type="checkbox" checked=""/>
<a href="https://dochub.com/redhat-h7vgb9/QonjxvZRGoPlOO8R6dl87g/modernizing-enterprise-java-red-hat-developer-v1-pdf?dt=pFBo7x1B6x6x5ejQBxkq">Modernizing Enterprise java</a> üìñ</li>
<li><input disabled="" type="checkbox" checked=""/>
<a href="https://www.google.com/search?q=Pro+NetBeans%E2%84%A2+IDE+6+Rich+Client+Platform+Edition+pdf&amp;rlz=1C5CHFA_enIT945IT948&amp;oq=Pro+NetBeans%E2%84%A2+IDE+6+Rich+Client+Platform+Edition+pdf&amp;aqs=chrome.0.69i59j69i57j69i64.1525j0j1&amp;sourceid=chrome&amp;ie=UTF-8">Pro NetBeans‚Ñ¢ IDE 6 Rich Client Platform Edition</a></li>
<li><input disabled="" type="checkbox" checked=""/>
<a href="https://javarevisited.blogspot.com/2019/10/the-java-developer-roadmap.html#axzz7i4UQ1WsY">The 2022 Java Developer RoadMap</a></li>
</ul>
<div style="break-before: page; page-break-before: always;"></div><h1 id="-esame-modalit√†-con-prove-intercorso-per-studenti-corsisti"><a class="header" href="#-esame-modalit√†-con-prove-intercorso-per-studenti-corsisti">üìù Esame: modalit√† con prove intercorso per studenti corsisti</a></h1>
<ul>
<li><a href="esame_con_intercorso.html#aa-20242025">A.A. 2024/2025</a></li>
<li><a href="esame_con_intercorso.html#aa-20232024">A.A. 2023/2024</a></li>
</ul>
<h2 id="aa-20242025"><a class="header" href="#aa-20242025">A.A. 2024/2025</a></h2>
<span style="color: gray;">
<h2 id="aa-20232024-1"><a class="header" href="#aa-20232024-1">A.A. 2023/2024</a></h2>
<p><a href="https://elearning.unisa.it/course/view.php?id=7552">E-Learning UNISA PD 23/24</a></p>
<p>L'esame per gli studenti corsisti pu√≤ essere sostenuto tramite 3 prove intercorso + prova orale nella data del preappello:</p>
<ul>
<li><em>Quiz Parte A</em>: Fondamenti di programmazione distribuita fino a Java RMI (Libro üìï) 20% del voto di accesso all'esame orale</li>
<li><em>Quiz Parte B</em>: Java Enterprise Edition (Libro üìó) 20% del voto di accesso all'esame orale</li>
<li><em>Programma JEE Parte C</em>: Sviluppo di un programma in JEE 60% del voto di accesso all'esame orale</li>
</ul>
<h3 id="esempi-di-votazione"><a class="header" href="#esempi-di-votazione">Esempi di votazione</a></h3>
<div class="table-wrapper"><table><thead><tr><th>20% Quiz Parte A</th><th>20% Quiz Parte B</th><th>60% Programma JEE</th><th>Voto di accesso esame orale</th></tr></thead><tbody>
<tr><td>18</td><td>18</td><td>18</td><td>18</td></tr>
<tr><td>18</td><td>30</td><td>18</td><td>20,4</td></tr>
<tr><td>18</td><td>18</td><td>30</td><td>25,2</td></tr>
<tr><td>0</td><td>0</td><td>30</td><td>18</td></tr>
<tr><td>30</td><td>30</td><td>0</td><td>12</td></tr>
<tr><td>0</td><td>30</td><td>30</td><td>24</td></tr>
<tr><td>30</td><td>0</td><td>0</td><td>6</td></tr>
</tbody></table>
</div>
<h2 id="calendario-delle-prove-da-confermare"><a class="header" href="#calendario-delle-prove-da-confermare">Calendario delle prove (da confermare)</a></h2>
<p>Il candidato deve munirsi di un laptop, dotato di <a href="https://safeexambrowser.org/">Safe Exam Browser</a>, per lo svolgimento della prova tramite la piattaforma di e-learning di UNISA.</p>
<div class="table-wrapper"><table><thead><tr><th>üóìÔ∏è</th><th>üïò</th><th>üìç</th><th>‚úÖ‚ùå</th></tr></thead><tbody>
<tr><td>Quiz Parte A (Fino a RMI)</td><td>09/11/2023 11:15-11:45</td><td>F8</td><td>‚úÖ</td></tr>
<tr><td>Quiz Parte B (Fino a JMS)</td><td>20/11/2023 14:45-15:15</td><td>Lab Sammet</td><td>‚úÖ</td></tr>
<tr><td>Programma JEE</td><td>18/12/2023 14:30-17:00</td><td>Lab Sammet</td><td></td></tr>
</tbody></table>
</div>
<p>Data di consegna della prova 18/12/2023 entro le ore 9:00 tramite la piattaforma e-learning di unisa.</p>
<h3 id="analisi-dei-risultati-2023"><a class="header" href="#analisi-dei-risultati-2023">Analisi dei risultati 2023</a></h3>
<p><strong>Quiz Parte A</strong></p>
<p><img src="https://github.com/spagnuolocarmine/programmazione-distribuita/raw/main/data/scores/quiz-a_09_11_2023.png" alt="quiz-a-2023" /></p>
<p><strong>Quiz Parte B</strong></p>
<p><img src="https://github.com/spagnuolocarmine/programmazione-distribuita/raw/main/data/scores/quiz-b_20_11_2023.png" alt="quiz-b-2023" />
</span></p>
<div style="break-before: page; page-break-before: always;"></div><h1 id="java-remote-method-invocation-rmi"><a class="header" href="#java-remote-method-invocation-rmi">Java Remote Method Invocation (RMI)</a></h1>
<h2 id="hello-world-con-java-remote-method-invocation"><a class="header" href="#hello-world-con-java-remote-method-invocation">Hello World con Java Remote Method Invocation</a></h2>
<ul>
<li>In questo esempio utilizzeremo per il servizio di naming Java RMI registry <code>rmiregistry</code> presente nella directory <code>bin</code> della jdk,
<ul>
<li>per permettere al registro di caricare la codebase necessaria dobbiamo avviarlo all'interno della directory contente i file <code>.class</code>del nostro progetto, nel costro caso la direcory <code>$Project/build/classes</code></li>
</ul>
</li>
<li>Per i nostri scopi definiamo un nuovo SecurityManager che garantisce una politica <code>AllPermission</code>.</li>
<li>Per la lookup degli oggetti remoti utilizzeremo la classe <a href="https://docs.oracle.com/javase/8/docs/api/java/rmi/Naming.html"><code>Naming</code></a>.</li>
<li><a href="https://docs.oracle.com/javase/8/docs/technotes/guides/rmi/hello/hello-world.html">Material di supporto: Oracle Getting Started Using Java RMI</a></li>
</ul>
<ol>
<li>Definizione interfaccia remota <code>Hello.java</code></li>
</ol>
<pre><code class="language-java">   public interface Hello extends java.rmi.Remote {
     String dimmiQualcosa(String daChi) throws java.rmi.RemoteException;
   }
</code></pre>
<ol start="2">
<li>Implementazione dell'oggetto remoto <code>HelloImpl.java</code></li>
</ol>
<pre><code class="language-java">import java.rmi.*;
import java.rmi.server.UnicastRemoteObject; 
import java.security.Permission;
import java.util.logging.Logger;
public class HelloImpl extends UnicastRemoteObject implements Hello {
    
    private static final long serialVersionUID = -4469091140865645865L;
    static Logger logger= Logger.getLogger("global");
    public HelloImpl() throws RemoteException { }
    public String dimmiQualcosa(String daChi) throws RemoteException {
        logger.info("Sto salutando "+daChi);
        return "Ciao "+daChi+"!"; 
    }
    public static void main(String args[]) throws RemoteException { 
        System.setSecurityManager(new SecurityManager() {
            @Override
            public void checkPermission(Permission perm) {
            }
            @Override
            public void checkPermission(Permission perm, Object context) {
            }
        });
        try {
            logger.info("Creo l‚Äôoggetto remoto..."); 
            HelloImpl obj = new HelloImpl(); 
            logger.info("... ne effettuo il rebind...");
            Naming.rebind("HelloServer", obj); 
           
            logger.info("... Pronto!");
        } catch (Exception e) { 
            e.printStackTrace();
        }
    }
}
</code></pre>
<ol start="3">
<li>Definizione del client che utilizza l'oggetto remoto <code>HelloClient.java</code></li>
</ol>
<pre><code class="language-java">import java.rmi.*;
import java.util.logging.Logger;
public class HelloClient {
    static Logger logger= Logger.getLogger("global");
    public static void main(String args[]) { 
        try {
            
        logger.info("Sto cercando l‚Äôoggetto remoto..."); 
        Hello obj = (Hello) Naming.lookup("rmi://localhost/HelloServer");  
        logger.info("... Trovato! Invoco metodo...");
        String risultato = obj.dimmiQualcosa("Pippo");
        System.out.println("Ricevuto:"+ risultato); } 
        catch (Exception e) { e.printStackTrace(); }

    }
}
</code></pre>
<ol start="4">
<li>Esecuzione del progetto
<ul>
<li>avviare <code>rmiregistry</code> dalla directory <code>~/$PROJECT_NAME/build/classes</code> porta di default <code>rmiregistry</code> 1099.</li>
<li>eseguire <code>HelloImpl.java</code>da netbeans tasto destro run file.</li>
<li>eseguire <code>HelloClient.java</code>da netbeans tasto destro run file.</li>
</ul>
</li>
</ol>
<h2 id="rmiregistry-locale-e-export-di-oggetti-remoti"><a class="header" href="#rmiregistry-locale-e-export-di-oggetti-remoti"><code>rmiregistry</code> locale e export di oggetti remoti</a></h2>
<ul>
<li>Server</li>
</ul>
<pre><code class="language-java">public void createStubAndBind() throws RemoteException {
	MessengerService stub = (MessengerService) UnicastRemoteObject.exportObject((MessengerService) this, 0);
	Registry registry = LocateRegistry.createRegistry(1099);
	registry.rebind("MessengerService", stub);
}
</code></pre>
<ul>
<li>Client</li>
</ul>
<pre><code class="language-java">Registry registry = LocateRegistry.getRegistry();
MessengerService server = (MessengerService) registry.lookup("MessengerService");
responseMessage = server.sendMessage("Client Message");
</code></pre>
<h2 id="esercizi-java-rmi"><a class="header" href="#esercizi-java-rmi">Esercizi Java RMI</a></h2>
<ol>
<li>Progettare e realizzare una semplice applicazione RMI client/server per realizzare una calcolatrice:
<ul>
<li>Interfaccia remota <code>Calculator</code> che definire i metodi per le operazioni di somma, sottrazione, divisione e moltiplicazione;</li>
<li><code>CalculatorImpl</code> implementa l'interfaccia <code>Calculator</code> ed estende <code> java.rmi.server.UnicastRemoteObject</code> definendo la logica dell'applicazione;</li>
<li><code>CalculatorServer</code> definisce solo il metodo <em>main</em> e costruisce ed esporta l'oggetto remoto  <code>CalculatorImpl</code>;</li>
<li><code>CalculatorClient</code> utilizza l'oggetto remoto <code>Calculator</code>.</li>
</ul>
</li>
<li>Progettare e realizzare una  applicazione RMI client/server per la gestione delle prenotazioni di un Hotel, con le seguenti operazioni:
<ul>
<li>il client deve essere in grado di ottenere la lista delle stanze libere;</li>
<li>il client pu√≤ tentare di prenotare una stanza e ottiene un risultato booleano;</li>
<li>la applicazione deve funzionare in presenza di pi√π client connessi.</li>
</ul>
</li>
</ol>
<div style="break-before: page; page-break-before: always;"></div><h1 id="java-remote-method-invocation-rmi-1"><a class="header" href="#java-remote-method-invocation-rmi-1">Java Remote Method Invocation (RMI)</a></h1>
<h2 id="hello-world-con-java-remote-method-invocation-1"><a class="header" href="#hello-world-con-java-remote-method-invocation-1">Hello World con Java Remote Method Invocation</a></h2>
<ul>
<li>In questo esempio utilizzeremo per il servizio di naming Java RMI registry <code>rmiregistry</code> presente nella directory <code>bin</code> della jdk,
<ul>
<li>per permettere al registro di caricare la codebase necessaria dobbiamo avviarlo all'interno della directory contente i file <code>.class</code>del nostro progetto, nel costro caso la direcory <code>$Project/build/classes</code></li>
</ul>
</li>
<li>Per i nostri scopi definiamo un nuovo SecurityManager che garantisce una politica <code>AllPermission</code>.</li>
<li>Per la lookup degli oggetti remoti utilizzeremo la classe <a href="https://docs.oracle.com/javase/8/docs/api/java/rmi/Naming.html"><code>Naming</code></a>.</li>
<li><a href="https://docs.oracle.com/javase/8/docs/technotes/guides/rmi/hello/hello-world.html">Material di supporto: Oracle Getting Started Using Java RMI</a></li>
</ul>
<ol>
<li>Definizione interfaccia remota <code>Hello.java</code></li>
</ol>
<pre><code class="language-java">   public interface Hello extends java.rmi.Remote {
     String dimmiQualcosa(String daChi) throws java.rmi.RemoteException;
   }
</code></pre>
<ol start="2">
<li>Implementazione dell'oggetto remoto <code>HelloImpl.java</code></li>
</ol>
<pre><code class="language-java">import java.rmi.*;
import java.rmi.server.UnicastRemoteObject; 
import java.security.Permission;
import java.util.logging.Logger;
public class HelloImpl extends UnicastRemoteObject implements Hello {
    
    private static final long serialVersionUID = -4469091140865645865L;
    static Logger logger= Logger.getLogger("global");
    public HelloImpl() throws RemoteException { }
    public String dimmiQualcosa(String daChi) throws RemoteException {
        logger.info("Sto salutando "+daChi);
        return "Ciao "+daChi+"!"; 
    }
    public static void main(String args[]) throws RemoteException { 
        System.setSecurityManager(new SecurityManager() {
            @Override
            public void checkPermission(Permission perm) {
            }
            @Override
            public void checkPermission(Permission perm, Object context) {
            }
        });
        try {
            logger.info("Creo l‚Äôoggetto remoto..."); 
            HelloImpl obj = new HelloImpl(); 
            logger.info("... ne effettuo il rebind...");
            Naming.rebind("HelloServer", obj); 
           
            logger.info("... Pronto!");
        } catch (Exception e) { 
            e.printStackTrace();
        }
    }
}
</code></pre>
<ol start="3">
<li>Definizione del client che utilizza l'oggetto remoto <code>HelloClient.java</code></li>
</ol>
<pre><code class="language-java">import java.rmi.*;
import java.util.logging.Logger;
public class HelloClient {
    static Logger logger= Logger.getLogger("global");
    public static void main(String args[]) { 
        try {
            
        logger.info("Sto cercando l‚Äôoggetto remoto..."); 
        Hello obj = (Hello) Naming.lookup("rmi://localhost/HelloServer");  
        logger.info("... Trovato! Invoco metodo...");
        String risultato = obj.dimmiQualcosa("Pippo");
        System.out.println("Ricevuto:"+ risultato); } 
        catch (Exception e) { e.printStackTrace(); }

    }
}
</code></pre>
<ol start="4">
<li>Esecuzione del progetto
<ul>
<li>avviare <code>rmiregistry</code> dalla directory <code>~/$PROJECT_NAME/build/classes</code> porta di default <code>rmiregistry</code> 1099.</li>
<li>eseguire <code>HelloImpl.java</code>da netbeans tasto destro run file.</li>
<li>eseguire <code>HelloClient.java</code>da netbeans tasto destro run file.</li>
</ul>
</li>
</ol>
<h2 id="rmiregistry-locale-e-export-di-oggetti-remoti-1"><a class="header" href="#rmiregistry-locale-e-export-di-oggetti-remoti-1"><code>rmiregistry</code> locale e export di oggetti remoti</a></h2>
<ul>
<li>Server</li>
</ul>
<pre><code class="language-java">public void createStubAndBind() throws RemoteException {
	MessengerService stub = (MessengerService) UnicastRemoteObject.exportObject((MessengerService) this, 0);
	Registry registry = LocateRegistry.createRegistry(1099);
	registry.rebind("MessengerService", stub);
}
</code></pre>
<ul>
<li>Client</li>
</ul>
<pre><code class="language-java">Registry registry = LocateRegistry.getRegistry();
MessengerService server = (MessengerService) registry.lookup("MessengerService");
responseMessage = server.sendMessage("Client Message");
</code></pre>
<h2 id="esercizi-java-rmi-1"><a class="header" href="#esercizi-java-rmi-1">Esercizi Java RMI</a></h2>
<ol>
<li>Progettare e realizzare una semplice applicazione RMI client/server per realizzare una calcolatrice:
<ul>
<li>Interfaccia remota <code>Calculator</code> che definire i metodi per le operazioni di somma, sottrazione, divisione e moltiplicazione;</li>
<li><code>CalculatorImpl</code> implementa l'interfaccia <code>Calculator</code> ed estende <code> java.rmi.server.UnicastRemoteObject</code> definendo la logica dell'applicazione;</li>
<li><code>CalculatorServer</code> definisce solo il metodo <em>main</em> e costruisce ed esporta l'oggetto remoto  <code>CalculatorImpl</code>;</li>
<li><code>CalculatorClient</code> utilizza l'oggetto remoto <code>Calculator</code>.</li>
</ul>
</li>
<li>Progettare e realizzare una  applicazione RMI client/server per la gestione delle prenotazioni di un Hotel, con le seguenti operazioni:
<ul>
<li>il client deve essere in grado di ottenere la lista delle stanze libere;</li>
<li>il client pu√≤ tentare di prenotare una stanza e ottiene un risultato booleano;</li>
<li>la applicazione deve funzionare in presenza di pi√π client connessi.</li>
</ul>
</li>
</ol>
<div style="break-before: page; page-break-before: always;"></div><h1 id="introduzione-java-enterprise-edition-java-ee"><a class="header" href="#introduzione-java-enterprise-edition-java-ee">Introduzione Java Enterprise Edition (Java EE)</a></h1>
<ul>
<li><a href="04-javaee.html#introduzione-java-enterprise-edition-java-ee">Introduzione Java Enterprise Edition (Java EE)</a></li>
<li><a href="04-javaee.html#obiettivo">Obiettivo</a></li>
<li><a href="04-javaee.html#contenuti">Contenuti</a></li>
<li><a href="04-javaee.html#materiale-bibliografico">Materiale bibliografico</a></li>
<li><a href="04-javaee.html#altri-link-interessanti">Altri link interessanti</a></li>
<li><a href="04-javaee.html#domande-di-riepilogo">Domande di riepilogo</a></li>
</ul>
<h1 id="obiettivo"><a class="header" href="#obiettivo">Obiettivo</a></h1>
<p>Comprendere le motivazioni dietro Java Enterprise. Presentare i concetti chiavi dell'architetettura di Java EE e le tecnologie.</p>
<h1 id="contenuti"><a class="header" href="#contenuti">Contenuti</a></h1>
<ul>
<li>Introduzione</li>
<li>Architettura
<ul>
<li>Multilayer e multitier</li>
<li>Containers</li>
<li>Packaging</li>
</ul>
</li>
<li>Annotazioni e Deployment Descriptor
<ul>
<li>L‚Äôecosistema JEE</li>
<li>Standard</li>
<li>Storia</li>
</ul>
</li>
<li>Tecnologie</li>
</ul>
<h1 id="materiale-bibliografico"><a class="header" href="#materiale-bibliografico">Materiale bibliografico</a></h1>
<ul>
<li>Beginning Java Enterprise Edition: Chapter 1 "Java EE 7 at a Glance"</li>
<li><a href="https://github.com/agoncal/agoncal-book-javaee7">Repositoty codice esempi del libro</a></li>
</ul>
<h1 id="altri-link-interessanti"><a class="header" href="#altri-link-interessanti">Altri link interessanti</a></h1>
<ul>
<li><a href="https://javaee.github.io/tutorial">Tutorial su Java EE</a></li>
<li><a href="https://docs.oracle.com/javaee/7/tutorial/overview003.htm">Distributed Multitiered Applications</a></li>
<li><a href="https://docs.oracle.com/javaee/7/tutorial/packaging001.htm#BCGDJDFB">Packaging Applications</a></li>
<li><a href="https://www.adrianbartnik.de/blog/annotation-processing/">Java Annotation Processing</a></li>
</ul>
<h1 id="domande-di-riepilogo"><a class="header" href="#domande-di-riepilogo">Domande di riepilogo</a></h1>
<ul>
<li>Quali sono le motivazioni dietro Java Enterprise?</li>
<li>Che cos‚Äô√® un Container?</li>
<li>Quali sono i quattro container di Java EE?</li>
<li>Quali sono i vantaggi e svantaggi delle annotazioni rispetto ai deployment descriptor?</li>
<li>Cosa sono le annotazioni?</li>
<li>Come funziona il meccanismo delle annotazioni?</li>
<li>Che cos‚Äô√® un application server?</li>
</ul>
<div style="break-before: page; page-break-before: always;"></div><h1 id="contexts-and-dependency-injection-cdi"><a class="header" href="#contexts-and-dependency-injection-cdi">Contexts and Dependency Injection (CDI)</a></h1>
<ul>
<li><a href="04-cdi.html#contexts-and-dependency-injection-cdi">Contexts and Dependency Injection (CDI)</a></li>
<li><a href="04-cdi.html#obiettivo">Obiettivo</a></li>
<li><a href="04-cdi.html#contenuti">Contenuti</a></li>
<li><a href="04-cdi.html#materiale-bibliografico">Materiale bibliografico</a></li>
<li><a href="04-cdi.html#domande-di-riepilogo">Domande di riepilogo</a></li>
</ul>
<h1 id="obiettivo-1"><a class="header" href="#obiettivo-1">Obiettivo</a></h1>
<p>Presentare il meccanismo di Dependency and Context Injection. Presentare concetti chiavi legati al ciclo di vita e al deployment delle applicazioni enterprise. Mostrare degli esempi di injection, qualificatori, producers, disposers, interceptors e decorators.</p>
<h1 id="contenuti-1"><a class="header" href="#contenuti-1">Contenuti</a></h1>
<p><em>Parte 1</em></p>
<ul>
<li>Introduzione
<ul>
<li>Dependency Injection</li>
<li>Life-cycle Management</li>
<li>Interception</li>
<li>Loose Coupling and Strong Typing</li>
<li>Deployment Descriptor</li>
</ul>
</li>
<li>Esempio di CDI Bean
<ul>
<li>Injection</li>
<li>Qualifiers</li>
<li>Producers/Disposers</li>
<li>Scope</li>
</ul>
</li>
</ul>
<p><em>Parte 2</em></p>
<ul>
<li>Interceptors
<ul>
<li>Classi Interceptor e Ciclo di vita</li>
<li>Interceptor multipli</li>
<li>Decorators ed eventi</li>
</ul>
</li>
</ul>
<h1 id="materiale-bibliografico-1"><a class="header" href="#materiale-bibliografico-1">Materiale bibliografico</a></h1>
<ul>
<li>Beginning Java Enterprise Edition:
<ul>
<li>Chapter 2 "Context Dependance Injection" da pag. 23 a 66 (tranne "CDI Specifications Overview", "InjectionPoint API", "Beans in Expression Language")</li>
</ul>
</li>
<li><a href="https://learn.microsoft.com/en-us/previous-versions/dotnet/netframework-4.0/hh323705(v=vs.100)?redirectedfrom=MSDN">Descrizione di classi tightly e loosely coupled</a></li>
<li><a href="https://docs.oracle.com/javaee/7/tutorial/cdi-basic.htm#GIWHB">Introduction to Contexts and Dependency Injection for Java EE</a></li>
<li><a href="https://www.oracle.com/technical-resources/articles/java/javareflection.html#:~:text=Reflection%20is%20a%20feature%20in,its%20members%20and%20display%20them.">Using Java Reflection</a></li>
<li><a href="https://www.andygibson.net/blog/article/comparing-jsf-beans-cdi-beans-and-ejbs/">Comparing JSF Beans, CDI Beans and EJBs</a></li>
<li><a href="https://www.oracle.com/technical-resources/articles/hunter-meta1.html">@Retention</a></li>
<li><a href="https://docs.oracle.com/javase/1.5.0/docs/guide/language/annotations.html">@interface</a></li>
<li>@Transactional
<ul>
<li>Beginning Java Enterprise Edition: Chapter 9 "Transactions" pg.302</li>
</ul>
</li>
</ul>
<h1 id="domande-di-riepilogo-1"><a class="header" href="#domande-di-riepilogo-1">Domande di riepilogo</a></h1>
<ul>
<li>Qual √® l'idea alla base del design pattern inversion of control?</li>
<li>Quali sono i vantaggi del "loose coupling, strong typing"?</li>
<li>In che modo il ciclo di vita di un bean differisce da quello di un POJO?</li>
<li>Quali sono i vantaggi derivanti dall'uso degli Interceptor?</li>
<li>In che modo √® possibile definire una sorta di priorit√† nell'esecuzione di una catena di Interceptor?</li>
<li>In che modo √® possibile realizzare disaccoppiamento nelle applicazioni Java enterprise?</li>
<li>Qual √® il meccanismo che permette di scegliere fra due diverse implementazioni di uno specifico bean?</li>
<li>Perch√® √® stato introdotto il concetto di Interceptor Binding?</li>
<li>Qual √® il vantaggio derivante dall'uso dei Decorator?</li>
<li>Qual √® il vantaggio derivante dall'uso degli Eventi?</li>
</ul>
<div style="break-before: page; page-break-before: always;"></div><h1 id="laboratorio-java-ee-"><a class="header" href="#laboratorio-java-ee-">Laboratorio Java EE ‚òï</a></h1>
<ul>
<li><a href="05-javaee-lab.html#laboratorio-java-ee-">Laboratorio Java EE ‚òï</a></li>
<li><a href="05-javaee-lab.html#installazione-ambiente-di-sviluppo">Installazione ambiente di sviluppo</a>
<ul>
<li><a href="05-javaee-lab.html#importare-i-progetti-del-libro-di-testo-nel-proprio-ambiente">Importare i progetti del libro di testo nel proprio ambiente</a></li>
</ul>
</li>
<li><a href="05-javaee-lab.html#esercizi">Esercizi</a>
<ul>
<li><a href="05-javaee-lab.html#0-un-primo-esempio-con-cdi">0. Un primo esempio con CDI</a></li>
<li><a href="05-javaee-lab.html#1-%EF%B8%8F-esercizio-explore-cdi---applicazione-hello-world-cdi">1. üó∫Ô∏è Esercizio Explore CDI - Applicazione Hello World CDI</a></li>
<li><a href="05-javaee-lab.html#2-%EF%B8%8F-esercizio-music-library-primi-">2. ‚èØÔ∏è Esercizio Music Library primi üë£</a></li>
<li><a href="05-javaee-lab.html#3-verifica-del-funzionamento-di-safe-exam-browser">3. Verifica del funzionamento di Safe Exam Browser</a></li>
<li><a href="05-javaee-lab.html#approfondimenti">Approfondimenti</a></li>
</ul>
</li>
</ul>
<h1 id="installazione-ambiente-di-sviluppo"><a class="header" href="#installazione-ambiente-di-sviluppo">Installazione ambiente di sviluppo</a></h1>
<ul>
<li>Utilizzare solo la JDK SE 8.0</li>
<li>Installare <a href="https://netbeans.apache.org/download/nb15/">Netbeans</a></li>
<li>‚ö†Ô∏è Utilizzare per il percorso di installazione di Netbeans e dei progetti solo path privi di spazio!</li>
<li>Nel caso di pi√π versioni della JDK, impostare Netbeans per utilizzare come default la JDK 8.0</li>
<li>Unix like systems: netbeans/etc/netbeans.conf</li>
<li>Aggiungere un nuovo server Glassfish 4.1: Tools ‚û°Ô∏è Servers ‚û°Ô∏è Add Servers ...</li>
<li>Verificare che il server Glassfish utilizza JDK 8, nel caso modificare il file <code>glassfish/config/asenv.conf</code> per impostare il percorso corretto della JAVA_HOME</li>
</ul>
<h2 id="importare-i-progetti-del-libro-di-testo-nel-proprio-ambiente"><a class="header" href="#importare-i-progetti-del-libro-di-testo-nel-proprio-ambiente">Importare i progetti del libro di testo nel proprio ambiente</a></h2>
<p><a href="https://github.com/Apress/beg-java-ee-7">Repository</a> codice  del libro di testo <a href="https://link.springer.com/book/10.1007/978-1-4302-4627-5">Beginning Java EE 7</a></p>
<ol>
<li>Code ‚û°Ô∏è <a href="https://github.com/Apress/beg-java-ee-7">Download Zip</a>,  Unarchive the project zip, Open Project</li>
<li>Aprire il progetto <a href="https://github.com/Apress/beg-java-ee-7/tree/master/agoncal-book-javaee7-master/chapter02/chapter02-samples">chapter02-samples</a></li>
</ol>
<ul>
<li>Aggiungere nel descrittore di progetto <a href="https://maven.apache.org/">Maven</a> nella dipendenza <code>javaee-api</code>la versione specifica di J2EE 7.0</li>
</ul>
<pre><code class="language-maven">    &lt;dependency&gt;
      &lt;groupId&gt;javax&lt;/groupId&gt;
      &lt;artifactId&gt;javaee-api&lt;/artifactId&gt;
      &lt;version&gt;7.0&lt;/version&gt;
    &lt;/dependency&gt; 
</code></pre>
<ul>
<li>Analizzare il codice degli esercizi</li>
</ul>
<ol>
<li>Aprire il progetto <a href="https://github.com/Apress/beg-java-ee-7/tree/master/agoncal-book-javaee7-master/chapter02/chapter02-putting-together">chapter02-putting-together</a> e provare ad eseguire il file <code>Main.java</code>
<ul>
<li>Beginning Java EE 7 pg. 57</li>
<li>Questo esempio utilizza <a href="https://weld.cdi-spec.org/">Weld</a> un implementazione CDI per applicazioni Java o Java EE ora sviluppato nell'ambito del progetto <a href="https://jakarta.ee/">Jakarta EE</a>. Weld in questo caso consente di eseguire una applicazione Java SE che utilizza CDI.</li>
</ul>
</li>
</ol>
<h1 id="esercizi"><a class="header" href="#esercizi">Esercizi</a></h1>
<h2 id="0-un-primo-esempio-con-cdi"><a class="header" href="#0-un-primo-esempio-con-cdi">0. Un primo esempio con CDI</a></h2>
<p>Creare un nuovo progetto <code>CDI WebApplication</code> per utilizzare la metodologia CDI per visualizzare tramite una Servlet il risulato della creazione di un istanza di <code>Book</code>.</p>
<ul>
<li>New Project ‚û°Ô∏è Java with ‚û°Ô∏è Ant Java Web ‚û°Ô∏è Web Application</li>
<li>Includere i sorgenti di <code>chapter02-putting-together</code> nel package principale, utilizzando la struttura originale (fare copia e incolla dei sorgenti ossia del package <code>org.agoncal.book.javaee7.chapter02</code> in src)</li>
<li>Includere la dipendenza a J2EE 7, Project X ‚û°Ô∏è Properties ‚û°Ô∏è Libraries ‚û°Ô∏è Add Library ... ‚û°Ô∏è <code>Java EE Web 7 API Library</code></li>
<li>Create una nuova Servlet, chiamata <code>NewServlet</code> Source Package ‚û°Ô∏è New ‚û°Ô∏è Servlet...</li>
<li>Selezionare la modalit√† di discovery <code>all</code> nel file <code>Web Pages/WEB-INF/beans.xml</code> se non presente crearlo con new file in <code>Web Pages/WEB-INF/beans.xml</code></li>
</ul>
<pre><code class="language-xml">&lt;?xml version="1.0" encoding="UTF-8"?&gt;
&lt;beans xmlns="http://xmlns.jcp.org/xml/ns/javaee"
       xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
       xsi:schemaLocation="http://xmlns.jcp.org/xml/ns/javaee http://xmlns.jcp.org/xml/ns/javaee/beans_1_1.xsd"
       bean-discovery-mode="all"&gt;
&lt;/beans&gt;
</code></pre>
<ul>
<li>Utilizzare la annotazione <code>@Inject</code>per includere una nuova istanza <code>BookService</code>nel codice della servlet</li>
</ul>
<pre><code class="language-java">public class MainServerlet extends HttpServlet {
    
    @Inject
    BookService b;
...
}
</code></pre>
<ul>
<li>Utilizzare il servizio BookService per costruire un nuovo libro e visualizzare risultato nell'output della servlet in elemento HTML <code>&lt;h3&gt;</code></li>
</ul>
<pre><code class="language-java"> protected void processRequest(HttpServletRequest request, HttpServletResponse response)
            throws ServletException, IOException {
        response.setContentType("text/html;charset=UTF-8");
        try ( PrintWriter out = response.getWriter()) {
            /* TODO output your page here. You may use following sample code. */
            out.println("&lt;!DOCTYPE html&gt;"); out.println("&lt;html&gt;");
            out.println("&lt;head&gt;");
            out.println("&lt;title &gt;Servlet NewServlet &lt;/title &gt;"); out.println("&lt;/head&gt;");
            out.println("&lt;body&gt;"); out.println("&lt;h1&gt;Servlet NewServlet at " +
            request.getContextPath() + "&lt;/h1&gt;");
            Book book = b.createBook("H2G2", 12.5f, "Geeky scifi Book");
            out.println("&lt;h3&gt;Libro creato:"+book+"&lt;/h3&gt;"); out.println("&lt;/body&gt;"); out.println("&lt;/html&gt;");
        }
    }
</code></pre>
<h2 id="1--esercizio-explore-cdi---applicazione-hello-world-cdi"><a class="header" href="#1--esercizio-explore-cdi---applicazione-hello-world-cdi">1. üó∫Ô∏è Esercizio Explore CDI - Applicazione Hello World CDI</a></h2>
<p>Realizzare da zero una nuova applicazione Hello World che utilizza una servlet per visualizzare in una pagina Web il testo <code>hello world</code>. La stringa viene elaborata tramite un particolare POJO MB che implementa l'interfaccia <code>Letters</code> √® possibile utilizzare <em>Injection</em>, <em>Qualifiers</em>, e <em>Producers</em>.</p>
<ul>
<li>Ad es. provare a definire un producer per la stringa <code>hello world</code> e un producer per la stringa <code>HELLO WORLD</code> in maiuscolo specificando due diversi <em>qualifiers</em> per i due producer, e alternare l'utilizzo dei due producer nella servlet per visualizzare il testo in minuscolo e maiuscolo in richieste diverse.</li>
</ul>
<h2 id="2--esercizio-music-library-primi-"><a class="header" href="#2--esercizio-music-library-primi-">2. ‚èØÔ∏è Esercizio Music Library primi üë£</a></h2>
<p>Gestire una libreria musicale definendo un oggetto POJO <em>Song</em> e un oggetto <em>Library</em> che √® un POJO MB che tramite l'utilizzo di Producers dichiara un <code>ArrayList&lt;Song&gt;</code>.</p>
<ul>
<li>Il risultato dell'architettura deve permettere di utilizzare il seguente codice nella classe Library: <code>@Inject ArrayList&lt;Song&gt; db;</code></li>
<li>e di gestire tutte le successive operazioni possibili in una libreria inizializzata con un produces (aggiungi, cancella, trova per ID, trova per nome, etc.).</li>
<li><em>Opzionale</em>: realizzare una serverlet che permette di visualizzare il contenuto della libreria in una pagina HTML, e di aggiungere nuove canzoni tramite un form HTML.</li>
</ul>
<h2 id="3-verifica-del-funzionamento-di-safe-exam-browser"><a class="header" href="#3-verifica-del-funzionamento-di-safe-exam-browser">3. Verifica del funzionamento di <a href="https://safeexambrowser.org/">Safe Exam Browser</a></a></h2>
<h2 id="approfondimenti"><a class="header" href="#approfondimenti">Approfondimenti</a></h2>
<ul>
<li><a href="https://tomylab.wordpress.com/2016/06/18/java-ee-7-the-big-picture/">JAVA EE 7: THE BIG PICTURE</a></li>
</ul>
<div style="break-before: page; page-break-before: always;"></div><h1 id="contexts-and-dependency-injection-cdi-1"><a class="header" href="#contexts-and-dependency-injection-cdi-1">Contexts and Dependency Injection (CDI)</a></h1>
<ul>
<li><a href="04-cdi.html#contexts-and-dependency-injection-cdi">Contexts and Dependency Injection (CDI)</a></li>
<li><a href="04-cdi.html#obiettivo">Obiettivo</a></li>
<li><a href="04-cdi.html#contenuti">Contenuti</a></li>
<li><a href="04-cdi.html#materiale-bibliografico">Materiale bibliografico</a></li>
<li><a href="04-cdi.html#domande-di-riepilogo">Domande di riepilogo</a></li>
</ul>
<h1 id="obiettivo-2"><a class="header" href="#obiettivo-2">Obiettivo</a></h1>
<p>Presentare il meccanismo di Dependency and Context Injection. Presentare concetti chiavi legati al ciclo di vita e al deployment delle applicazioni enterprise. Mostrare degli esempi di injection, qualificatori, producers, disposers, interceptors e decorators.</p>
<h1 id="contenuti-2"><a class="header" href="#contenuti-2">Contenuti</a></h1>
<p><em>Parte 1</em></p>
<ul>
<li>Introduzione
<ul>
<li>Dependency Injection</li>
<li>Life-cycle Management</li>
<li>Interception</li>
<li>Loose Coupling and Strong Typing</li>
<li>Deployment Descriptor</li>
</ul>
</li>
<li>Esempio di CDI Bean
<ul>
<li>Injection</li>
<li>Qualifiers</li>
<li>Producers/Disposers</li>
<li>Scope</li>
</ul>
</li>
</ul>
<p><em>Parte 2</em></p>
<ul>
<li>Interceptors
<ul>
<li>Classi Interceptor e Ciclo di vita</li>
<li>Interceptor multipli</li>
<li>Decorators ed eventi</li>
</ul>
</li>
</ul>
<h1 id="materiale-bibliografico-2"><a class="header" href="#materiale-bibliografico-2">Materiale bibliografico</a></h1>
<ul>
<li>Beginning Java Enterprise Edition:
<ul>
<li>Chapter 2 "Context Dependance Injection" da pag. 23 a 66 (tranne "CDI Specifications Overview", "InjectionPoint API", "Beans in Expression Language")</li>
</ul>
</li>
<li><a href="https://learn.microsoft.com/en-us/previous-versions/dotnet/netframework-4.0/hh323705(v=vs.100)?redirectedfrom=MSDN">Descrizione di classi tightly e loosely coupled</a></li>
<li><a href="https://docs.oracle.com/javaee/7/tutorial/cdi-basic.htm#GIWHB">Introduction to Contexts and Dependency Injection for Java EE</a></li>
<li><a href="https://www.oracle.com/technical-resources/articles/java/javareflection.html#:~:text=Reflection%20is%20a%20feature%20in,its%20members%20and%20display%20them.">Using Java Reflection</a></li>
<li><a href="https://www.andygibson.net/blog/article/comparing-jsf-beans-cdi-beans-and-ejbs/">Comparing JSF Beans, CDI Beans and EJBs</a></li>
<li><a href="https://www.oracle.com/technical-resources/articles/hunter-meta1.html">@Retention</a></li>
<li><a href="https://docs.oracle.com/javase/1.5.0/docs/guide/language/annotations.html">@interface</a></li>
<li>@Transactional
<ul>
<li>Beginning Java Enterprise Edition: Chapter 9 "Transactions" pg.302</li>
</ul>
</li>
</ul>
<h1 id="domande-di-riepilogo-2"><a class="header" href="#domande-di-riepilogo-2">Domande di riepilogo</a></h1>
<ul>
<li>Qual √® l'idea alla base del design pattern inversion of control?</li>
<li>Quali sono i vantaggi del "loose coupling, strong typing"?</li>
<li>In che modo il ciclo di vita di un bean differisce da quello di un POJO?</li>
<li>Quali sono i vantaggi derivanti dall'uso degli Interceptor?</li>
<li>In che modo √® possibile definire una sorta di priorit√† nell'esecuzione di una catena di Interceptor?</li>
<li>In che modo √® possibile realizzare disaccoppiamento nelle applicazioni Java enterprise?</li>
<li>Qual √® il meccanismo che permette di scegliere fra due diverse implementazioni di uno specifico bean?</li>
<li>Perch√® √® stato introdotto il concetto di Interceptor Binding?</li>
<li>Qual √® il vantaggio derivante dall'uso dei Decorator?</li>
<li>Qual √® il vantaggio derivante dall'uso degli Eventi?</li>
</ul>
<div style="break-before: page; page-break-before: always;"></div><ul>
<li><a href="05-jpa.html#contenuti">Contenuti</a></li>
<li><a href="05-jpa.html#materiale-bibliografico">Materiale bibliografico</a></li>
<li><a href="05-jpa.html#domande-di-riepilogo">Domande di riepilogo</a></li>
<li><a href="05-jpa.html#persistencexml-visto-a-lezione"><code>persistence.xml</code> visto a lezione</a></li>
</ul>
<h1 id="contenuti-3"><a class="header" href="#contenuti-3">Contenuti</a></h1>
<p><em>Parte 1</em></p>
<ul>
<li>Introduzione a JPA</li>
<li>Entit√†
<ul>
<li>Definizione</li>
<li>Anatomia</li>
<li>Queries</li>
</ul>
</li>
<li>Object-Relational Mapping (ORM)
<ul>
<li>Entity Manager</li>
<li>Persistence Unit</li>
<li>Ciclo di vita delle Entit√†</li>
</ul>
</li>
<li>Specifiche JPA</li>
<li>Esempio completo di JPA</li>
<li>Managing Persistent Objects</li>
</ul>
<p><em>Parte 2</em></p>
<ul>
<li>Come si manipolno le entita con un Entity Manager</li>
<li>JPQL
<ul>
<li>tipi di query</li>
</ul>
</li>
<li>Interazione col ciclo di vita
<ul>
<li>callbacks</li>
<li>listeners</li>
</ul>
</li>
</ul>
<h1 id="materiale-bibliografico-3"><a class="header" href="#materiale-bibliografico-3">Materiale bibliografico</a></h1>
<ul>
<li>"Beginning Java Enterprise Edition": Cap. 4 (tranne "Integration with Bean Validation", "JPA Specification Overview")</li>
<li>"Beginning Java Enterprise Edition": Cap. 5 (tranne "Composite Primary Keys", da pag 129 a 148)  e Cap. 6 (tranne "Fetching Relationships", da pag 161 a 176; "Type-Safe Criteria API", "Cache API", da pag 209 a 216)</li>
<li><a href="https://www.oracle.com/technical-resources/articles/vasiliev-jpql.html">Querying JPA Entities with JPQL and Native SQL</a></li>
</ul>
<h1 id="domande-di-riepilogo-3"><a class="header" href="#domande-di-riepilogo-3">Domande di riepilogo</a></h1>
<ul>
<li>Qual √® la differenza fra una entit√† ed un oggetto?</li>
<li>A cosa serve l'annotazione @GeneratedValue?</li>
<li>Qual √® l'elemento discriminante per distinguere una entit√† da un POJO?</li>
<li>Qual √® l'API fondamentale per la gestione delle operazioni sulle entit√†?</li>
<li>Quali sono le caratteristiche e le funzionalit√† pi√π importanti della persistence unit?</li>
<li>Descrivere il ciclo di vita di una entit√†</li>
<li>Descrivere i tipi di relazioni  in un database relazionale</li>
<li>A cosa serve l'annotazione @JoinColumn?</li>
<li>Definizione e funzionalit√† di un Persistence Context</li>
<li>Descrivere i vari tipi di query definiti da JPQL</li>
</ul>
<h1 id="persistencexml-visto-a-lezione"><a class="header" href="#persistencexml-visto-a-lezione"><code>persistence.xml</code> visto a lezione</a></h1>
<pre><code class="language-xml">&lt;?xml version="1.0" encoding="UTF-8"?&gt;
&lt;persistence version="2.1" xmlns="http://xmlns.jcp.org/xml/ns/persistence" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:schemaLocation="http://xmlns.jcp.org/xml/ns/persistence http://xmlns.jcp.org/xml/ns/persistence/persistence_2_1.xsd"&gt;
  &lt;persistence-unit name="PJPAPU" transaction-type="RESOURCE_LOCAL"&gt;
    &lt;provider&gt;org.eclipse.persistence.jpa.PersistenceProvider&lt;/provider&gt;
    &lt;class&gt;pjpa.Person&lt;/class&gt;
    &lt;properties&gt;
      &lt;property name="javax.persistence.jdbc.url" value="jdbc:derby://localhost:1527/Paolo;create=true"/&gt;
      &lt;property name="javax.persistence.jdbc.user" value="paolo"/&gt;
      &lt;property name="javax.persistence.jdbc.driver" value="org.apache.derby.jdbc.ClientDriver"/&gt;
            &lt;property name="javax.persistence.schema-generation.scripts.action" value="drop-and-create"/&gt;
      &lt;property name="javax.persistence.jdbc.password" value="paolo"/&gt;
      &lt;property name="javax.persistence.schema-generation.database.action" value="drop-and-create"/&gt;
       &lt;property name="eclipselink.logging.level" value="INFO"/&gt;
      &lt;property name="javax.persistence.schema-generation.scripts.create-target" value="pjpa-create.ddl"/&gt;
      &lt;property name="javax.persistence.schema-generation.scripts.drop-target" value="pjpa-drop.ddl"/&gt;
    &lt;/properties&gt;
  &lt;/persistence-unit&gt;
&lt;/persistence&gt;
</code></pre>
<div style="break-before: page; page-break-before: always;"></div><ul>
<li><a href="05-jpa.html#contenuti">Contenuti</a></li>
<li><a href="05-jpa.html#materiale-bibliografico">Materiale bibliografico</a></li>
<li><a href="05-jpa.html#domande-di-riepilogo">Domande di riepilogo</a></li>
<li><a href="05-jpa.html#persistencexml-visto-a-lezione"><code>persistence.xml</code> visto a lezione</a></li>
</ul>
<h1 id="contenuti-4"><a class="header" href="#contenuti-4">Contenuti</a></h1>
<p><em>Parte 1</em></p>
<ul>
<li>Introduzione a JPA</li>
<li>Entit√†
<ul>
<li>Definizione</li>
<li>Anatomia</li>
<li>Queries</li>
</ul>
</li>
<li>Object-Relational Mapping (ORM)
<ul>
<li>Entity Manager</li>
<li>Persistence Unit</li>
<li>Ciclo di vita delle Entit√†</li>
</ul>
</li>
<li>Specifiche JPA</li>
<li>Esempio completo di JPA</li>
<li>Managing Persistent Objects</li>
</ul>
<p><em>Parte 2</em></p>
<ul>
<li>Come si manipolno le entita con un Entity Manager</li>
<li>JPQL
<ul>
<li>tipi di query</li>
</ul>
</li>
<li>Interazione col ciclo di vita
<ul>
<li>callbacks</li>
<li>listeners</li>
</ul>
</li>
</ul>
<h1 id="materiale-bibliografico-4"><a class="header" href="#materiale-bibliografico-4">Materiale bibliografico</a></h1>
<ul>
<li>"Beginning Java Enterprise Edition": Cap. 4 (tranne "Integration with Bean Validation", "JPA Specification Overview")</li>
<li>"Beginning Java Enterprise Edition": Cap. 5 (tranne "Composite Primary Keys", da pag 129 a 148)  e Cap. 6 (tranne "Fetching Relationships", da pag 161 a 176; "Type-Safe Criteria API", "Cache API", da pag 209 a 216)</li>
<li><a href="https://www.oracle.com/technical-resources/articles/vasiliev-jpql.html">Querying JPA Entities with JPQL and Native SQL</a></li>
</ul>
<h1 id="domande-di-riepilogo-4"><a class="header" href="#domande-di-riepilogo-4">Domande di riepilogo</a></h1>
<ul>
<li>Qual √® la differenza fra una entit√† ed un oggetto?</li>
<li>A cosa serve l'annotazione @GeneratedValue?</li>
<li>Qual √® l'elemento discriminante per distinguere una entit√† da un POJO?</li>
<li>Qual √® l'API fondamentale per la gestione delle operazioni sulle entit√†?</li>
<li>Quali sono le caratteristiche e le funzionalit√† pi√π importanti della persistence unit?</li>
<li>Descrivere il ciclo di vita di una entit√†</li>
<li>Descrivere i tipi di relazioni  in un database relazionale</li>
<li>A cosa serve l'annotazione @JoinColumn?</li>
<li>Definizione e funzionalit√† di un Persistence Context</li>
<li>Descrivere i vari tipi di query definiti da JPQL</li>
</ul>
<h1 id="persistencexml-visto-a-lezione-1"><a class="header" href="#persistencexml-visto-a-lezione-1"><code>persistence.xml</code> visto a lezione</a></h1>
<pre><code class="language-xml">&lt;?xml version="1.0" encoding="UTF-8"?&gt;
&lt;persistence version="2.1" xmlns="http://xmlns.jcp.org/xml/ns/persistence" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:schemaLocation="http://xmlns.jcp.org/xml/ns/persistence http://xmlns.jcp.org/xml/ns/persistence/persistence_2_1.xsd"&gt;
  &lt;persistence-unit name="PJPAPU" transaction-type="RESOURCE_LOCAL"&gt;
    &lt;provider&gt;org.eclipse.persistence.jpa.PersistenceProvider&lt;/provider&gt;
    &lt;class&gt;pjpa.Person&lt;/class&gt;
    &lt;properties&gt;
      &lt;property name="javax.persistence.jdbc.url" value="jdbc:derby://localhost:1527/Paolo;create=true"/&gt;
      &lt;property name="javax.persistence.jdbc.user" value="paolo"/&gt;
      &lt;property name="javax.persistence.jdbc.driver" value="org.apache.derby.jdbc.ClientDriver"/&gt;
            &lt;property name="javax.persistence.schema-generation.scripts.action" value="drop-and-create"/&gt;
      &lt;property name="javax.persistence.jdbc.password" value="paolo"/&gt;
      &lt;property name="javax.persistence.schema-generation.database.action" value="drop-and-create"/&gt;
       &lt;property name="eclipselink.logging.level" value="INFO"/&gt;
      &lt;property name="javax.persistence.schema-generation.scripts.create-target" value="pjpa-create.ddl"/&gt;
      &lt;property name="javax.persistence.schema-generation.scripts.drop-target" value="pjpa-drop.ddl"/&gt;
    &lt;/properties&gt;
  &lt;/persistence-unit&gt;
&lt;/persistence&gt;
</code></pre>
<div style="break-before: page; page-break-before: always;"></div><ul>
<li><a href="06-jpa-lab.html#esercizio-1---bookstore">Esercizio 1 - BookStore</a></li>
<li><a href="06-jpa-lab.html#esercizio-2---job-scheduling">Esercizio 2 - Job Scheduling</a>
<ul>
<li><a href="06-jpa-lab.html#esercizio-21">Esercizio 2.1</a></li>
<li><a href="06-jpa-lab.html#esercizio-22">Esercizio 2.2</a></li>
<li><a href="06-jpa-lab.html#esercizio-23">Esercizio 2.3</a></li>
<li><a href="06-jpa-lab.html#esercizio-24">Esercizio 2.4</a></li>
</ul>
</li>
</ul>
<h1 id="esercizio-1---bookstore"><a class="header" href="#esercizio-1---bookstore">Esercizio 1 - BookStore</a></h1>
<p>Scrivere un programma Java usando JPA che simuli le operazioni principali di un negozio di libri (aggiunta, rimozione e lista dei libri).</p>
<ol>
<li>Da Derby, creare il database con un utente associato. Fate attenzione a specificare user name e password non vuote.</li>
<li>Creare una classe Entity Book caratterizzata da:
<ul>
<li>titolo, prezzo, descrizione, isbn e categoria.</li>
</ul>
</li>
<li>Creare una classe Main in cui l‚Äôutente pu√≤ aggiungere e rimuovere un libro e permetta di fare una ricerca per filtri (titolo, categoria, isbn).</li>
</ol>
<p>Note:</p>
<ul>
<li>Nuovo progetto Java with Ant ‚û°Ô∏è Java Application</li>
<li>Creare il file <code>META-INF/persistence.xml</code> da Netbeans</li>
<li>Aggiungere al progetto le librerie: <code>Java EE 7 API Library</code>, <code>Java DB Driver</code>, <code>Eclipse Link (JPA 2.1)</code></li>
<li>Se utilizzate come schema generation della persistence unit drop-and-create, non occorre che creiate manualmente le tabelle</li>
<li><em>Esempio di file persistence</em></li>
</ul>
<pre><code class="language-xml">&lt;persistence xmlns="http://xmlns.jcp.org/xml/ns/persistence" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:schemaLocation="http://xmlns.jcp.org/xml/ns/persistence http://xmlns.jcp.org/xml/ns/persistence/persistence_2_1.xsd" version="2.1"&gt;
    &lt;persistence-unit name="exercise_pu" transaction-type="RESOURCE_LOCAL"&gt;
    &lt;provider&gt;org.eclipse.persistence.jpa.PersistenceProvider &lt;/provider&gt;
    &lt;class&gt;pd.bookstore.Book&lt;/class&gt;
        &lt;properties&gt;
            &lt;property name="javax.persistence.schema-generation.database.action" value="drop-and-create"/&gt;
            &lt;property name="javax.persistence.jdbc.driver" value="org.apache.derby.jdbc.ClientDriver"/&gt;
            &lt;property name="javax.persistence.jdbc.url" value="jdbc:derby://localhost:1527/BookStore;create=true"/&gt;
            &lt;property name="javax.persistence.jdbc.password" value="abc"/&gt;
            &lt;property name="javax.persistence.jdbc.user" value="abc"/&gt;
        &lt;/properties&gt;
    &lt;/persistence-unit&gt;
&lt;/persistence&gt;
</code></pre>
<h1 id="esercizio-2---job-scheduling"><a class="header" href="#esercizio-2---job-scheduling">Esercizio 2 - Job Scheduling</a></h1>
<p>Scrivere un programma Java usando JPA che simuli le operazioni di una azienda che assegna a ogni dipendente un particolare lavoro (<em>Job</em>). Ad ogni dipendente (<em>Person</em>) si associa anche un particolare indirizzo (<em>Address</em>).</p>
<pre><code class="language-java">public class Person {
    private String id;
    private String firstName;
    private String lastName;
    private Character middleInitial;
    private Address address;
    private Job job;
    /*...*/
}
public class Address {
    private String id;
    private String street1;
    private String street2;
    private String city;
    private String state;
    private String zip;
    /*...*/
}

public class Job {
    private Long id;
    private String title;
    private Float salary;
    private String employeedId;
     /*...*/
}
</code></pre>
<p>Nota: vedere Cascading Events pg.191 libro di testo Java EE7</p>
<h2 id="esercizio-21"><a class="header" href="#esercizio-21">Esercizio 2.1</a></h2>
<p>Permettere il mapping di diversi Job per un singolo dipendente.</p>
<pre><code class="language-java">   @OneToMany(fetch = FetchType.LAZY, cascade = {CascadeType.PERSIST, CascadeType.REMOVE})
   private List&lt;Job&gt; jobs = new ArrayList&lt;&gt;();
</code></pre>
<h2 id="esercizio-22"><a class="header" href="#esercizio-22">Esercizio 2.2</a></h2>
<p>Definire le seguenti NamedQuery per l'entit√† <em>Person</em>:</p>
<pre><code class="language-java">@NamedQueries({
    @NamedQuery(name = FIND_ALL, query = " ... "),
    @NamedQuery(name = FIND_BY_FIRST_NAME, query = "  ... "),
    @NamedQuery(name = FIND_BY_LAST_NAME, query = " ... "),
    @NamedQuery(name = FIND_BY_FIRST_LAST_NAME, query = " ... "),
    @NamedQuery(name = FIND_BY_ADDRESS, query = " ... "),
    @NamedQuery(name = FIND_BY_ID, query = " ... "),
    @NamedQuery(name = FIND_BY_JOB, query = " ... "),
})

</code></pre>
<h2 id="esercizio-23"><a class="header" href="#esercizio-23">Esercizio 2.3</a></h2>
<p>Definire un POJO che permetta di popolare il database come segue.</p>
<pre><code class="language-java">
public class DatabasePopulator {
    private Person p1, p2, p3, p4;
    private Address a1,a2;
    private Job j1,j2,j3,j4,j5,j6,j7,j8;

    private void populateDB(){
        /*here code*/
    }
    private void clearDB(){
        /*here code*/
    }
}
</code></pre>
<h2 id="esercizio-24"><a class="header" href="#esercizio-24">Esercizio 2.4</a></h2>
<p>Scrivere una classe Main che permette di popolare il DB e permette di eseguire le diverse NamedQuery e di visualizzare il risulato (utilizzare <code>@Inject</code> e/o <code>@PersistenceUnit(unitName="name")</code>).</p>
<div style="break-before: page; page-break-before: always;"></div><ul>
<li><a href="06-ejb.html#contenuti">Contenuti</a></li>
<li><a href="06-ejb.html#materiale-bibliografico-per-lo-studio">Materiale bibliografico per lo studio</a></li>
<li><a href="06-ejb.html#alcune-domande-di-riepilogo">Alcune domande di riepilogo</a></li>
</ul>
<h1 id="contenuti-5"><a class="header" href="#contenuti-5">Contenuti</a></h1>
<p><em>Parte 1</em></p>
<ul>
<li>Introduzione agli EJB</li>
<li>Come sono fatti gli EJB</li>
<li>Tipi di EJB
<ul>
<li>Stateless</li>
<li>Stateful</li>
<li>Singleton</li>
</ul>
</li>
<li>Come usare un EJB</li>
</ul>
<p><em>Parte 2</em></p>
<ul>
<li>Ciclo di Vita dei Session Beans</li>
<li>Autorizzazioni
<ul>
<li>Autorizzazione dichiarativa</li>
<li>Autorizzazione da programma</li>
</ul>
</li>
<li>Transazioni
<ul>
<li>Cosa sono</li>
<li>Container-managed</li>
<li>Bean-Managed</li>
</ul>
</li>
<li>Esercizi EJB con NetBeans</li>
</ul>
<h1 id="materiale-bibliografico-per-lo-studio"><a class="header" href="#materiale-bibliografico-per-lo-studio">Materiale bibliografico per lo studio</a></h1>
<ul>
<li>"Beginning Java Enterprise Edition": Cap. 7, escludere da pag 247 a pag 256</li>
<li>"Beginning Java Enterprise Edition": Cap. 8, escludere Timer Service</li>
<li>"Beginning Java Enterprise Edition": Cap. 9,  solo "Understanding Transactions", "Transaction Support in EJB",  "Container-managed transactions" fino a pag. 296</li>
<li><a href="https://www.oracle.com/technical-resources/articles/java/cdi-javaee-bien.html"><code>@Inject</code> vs <code>@EJB</code></a></li>
<li><a href="https://javaee.github.io/tutorial/ejb-basicexamples003.html">Managing Concurrent Access in a Singleton Session Bean</a></li>
</ul>
<h1 id="alcune-domande-di-riepilogo"><a class="header" href="#alcune-domande-di-riepilogo">Alcune domande di riepilogo</a></h1>
<ul>
<li>Qual √® il ciclo di vita di un bean?</li>
<li>Qual √® il vantaggio dell'utilizzo di JNDI?</li>
<li>Quali sono le differenze tra i tre differenti tipi di beans in termini di chiamate dai clients?</li>
<li>Qual √® il caso d'uso pi√π comune per un singleton bean?</li>
<li>Qual √® il vantaggio dell'suo del: "Programmatic Authorization"?</li>
<li>Quali sono le principali differenze fra Container-Managed e Bean-managed transactions?</li>
<li>Packaging e deploying</li>
<li>Come invocare EJB</li>
</ul>
<div style="break-before: page; page-break-before: always;"></div><ul>
<li><a href="06-ejb.html#contenuti">Contenuti</a></li>
<li><a href="06-ejb.html#materiale-bibliografico-per-lo-studio">Materiale bibliografico per lo studio</a></li>
<li><a href="06-ejb.html#alcune-domande-di-riepilogo">Alcune domande di riepilogo</a></li>
</ul>
<h1 id="contenuti-6"><a class="header" href="#contenuti-6">Contenuti</a></h1>
<p><em>Parte 1</em></p>
<ul>
<li>Introduzione agli EJB</li>
<li>Come sono fatti gli EJB</li>
<li>Tipi di EJB
<ul>
<li>Stateless</li>
<li>Stateful</li>
<li>Singleton</li>
</ul>
</li>
<li>Come usare un EJB</li>
</ul>
<p><em>Parte 2</em></p>
<ul>
<li>Ciclo di Vita dei Session Beans</li>
<li>Autorizzazioni
<ul>
<li>Autorizzazione dichiarativa</li>
<li>Autorizzazione da programma</li>
</ul>
</li>
<li>Transazioni
<ul>
<li>Cosa sono</li>
<li>Container-managed</li>
<li>Bean-Managed</li>
</ul>
</li>
<li>Esercizi EJB con NetBeans</li>
</ul>
<h1 id="materiale-bibliografico-per-lo-studio-1"><a class="header" href="#materiale-bibliografico-per-lo-studio-1">Materiale bibliografico per lo studio</a></h1>
<ul>
<li>"Beginning Java Enterprise Edition": Cap. 7, escludere da pag 247 a pag 256</li>
<li>"Beginning Java Enterprise Edition": Cap. 8, escludere Timer Service</li>
<li>"Beginning Java Enterprise Edition": Cap. 9,  solo "Understanding Transactions", "Transaction Support in EJB",  "Container-managed transactions" fino a pag. 296</li>
<li><a href="https://www.oracle.com/technical-resources/articles/java/cdi-javaee-bien.html"><code>@Inject</code> vs <code>@EJB</code></a></li>
<li><a href="https://javaee.github.io/tutorial/ejb-basicexamples003.html">Managing Concurrent Access in a Singleton Session Bean</a></li>
</ul>
<h1 id="alcune-domande-di-riepilogo-1"><a class="header" href="#alcune-domande-di-riepilogo-1">Alcune domande di riepilogo</a></h1>
<ul>
<li>Qual √® il ciclo di vita di un bean?</li>
<li>Qual √® il vantaggio dell'utilizzo di JNDI?</li>
<li>Quali sono le differenze tra i tre differenti tipi di beans in termini di chiamate dai clients?</li>
<li>Qual √® il caso d'uso pi√π comune per un singleton bean?</li>
<li>Qual √® il vantaggio dell'suo del: "Programmatic Authorization"?</li>
<li>Quali sono le principali differenze fra Container-Managed e Bean-managed transactions?</li>
<li>Packaging e deploying</li>
<li>Come invocare EJB</li>
</ul>
<div style="break-before: page; page-break-before: always;"></div><ul>
<li><a href="07-ejb-lab.html#esercizio-0---hello-world-ejb">Esercizio 0 - Hello World EJB</a></li>
<li><a href="07-ejb-lab.html#esercizio-1---music-library--warm-up-">Esercizio 1 - Music Library üéµüìö (warm-up üèã)</a>
<ul>
<li><a href="07-ejb-lab.html#music-library">Music Library</a>
<ul>
<li><a href="07-ejb-lab.html#definizione-entit%C3%A0-e-persistenza">Definizione entit√† e persistenza</a></li>
<li><a href="07-ejb-lab.html#definizione-della-logica-della-nostra-applicazione">Definizione della logica della nostra applicazione</a></li>
</ul>
</li>
<li><a href="07-ejb-lab.html#music-library-client">Music Library Client</a></li>
</ul>
</li>
<li><a href="07-ejb-lab.html#esercizio-2---music-library-">Esercizio 2 - Music Library++ üéµüìö</a></li>
<li><a href="07-ejb-lab.html#esercizio-3---pdtify--%EF%B8%8F">Esercizio 3 - PDtify üéµ ‚èØÔ∏è</a></li>
<li><a href="07-ejb-lab.html#esercizi-bonus">Esercizi Bonus</a>
<ul>
<li><a href="07-ejb-lab.html#esercizio-b1---calcolatrice-ejb">Esercizio B.1 - Calcolatrice EJB</a></li>
<li><a href="07-ejb-lab.html#esercizio-b2---calcolatrice-ejb-basata-su-stack">Esercizio B.2 - Calcolatrice EJB basata su stack</a></li>
<li><a href="07-ejb-lab.html#esercizio-b3---calcolatrice-ejb-basata-su-stack-persistente">Esercizio B.3 - Calcolatrice EJB basata su stack persistente</a></li>
</ul>
</li>
</ul>
<blockquote>
<p>üöÄ Se avete problemi con la lookup dei vostri bean potete verificare che state utilizzando il dominio corretto con i parametri di default nel file <code>[USER_HOME]/GlassFish_Server/glassfish/domains/domain1/config/domain.xml</code>. Il pacchetto <code>[USER_HOME]/GlassFish_Server/glassfish/lib/gf-client.jar</code> carica configurazioni per l'InitialContext di default (<a href="https://docs.oracle.com/cd/E26576_01/doc.312/e24928/overview.htm#GSADG00004">GlassFish Server Administration Guide</a>).</p>
</blockquote>
<blockquote>
<p>‚ùì Esempio di setting della porta per il servizio IIOP necessario per il discovery di RMI:</p>
</blockquote>
<pre><code class="language-java">Properties props = new Properties();
props.setProperty("java.naming.factory.initial",
"com.sun.enterprise.naming.SerialInitContextFactory");
props.setProperty("java.naming.factory.url.pkgs",
"com.sun.enterprise.naming");
props.setProperty("java.naming.factory.state",
"com.sun.corba.ee.impl.presentation.rmi.JNDIStateFactoryImpl");
props.setProperty("org.omg.CORBA.ORBInitialHost", "localhost");
props.setProperty("org.omg.CORBA.ORBInitialPort", "3700");
Context ctx = new InitialContext(props);
</code></pre>
<h1 id="esercizio-0---hello-world-ejb"><a class="header" href="#esercizio-0---hello-world-ejb">Esercizio 0 - Hello World EJB</a></h1>
<p>Ripetere l'esercitazione visto a lezione per la definizione di un nuovo <em>stateless</em> EJB <code>HelloWorld</code> che implementa un metodo <code>sayHello(String text)</code> che restituisce una stringa di saluto. Il client deve essere un applicazione Java che invoca il metodo remoto <code>sayHello("Hello my name is "+name)</code> e stampa il risultato a console.</p>
<blockquote>
<p>üöÄ Includere nell'applicazione Java SE Client il pacchetto <code>[USER_HOME]/GlassFish_Server/glassfish/lib/gf-client.jar</code> per la lookup del bean remoto. Definendo la sua interfaccia remota <code>HelloWorldRemote.java</code> come segue:</p>
</blockquote>
<pre><code class="language-java">@Remote
public interface HelloWorldEJBRemote{
    public String sayHello(String name);
}
</code></pre>
<h1 id="esercizio-1---music-library--warm-up-"><a class="header" href="#esercizio-1---music-library--warm-up-">Esercizio 1 - Music Library üéµüìö (warm-up üèã)</a></h1>
<p>Creare due progetti:</p>
<ul>
<li><strong>MusicLibrary</strong>: New Project ‚û°Ô∏è Java with Ant ‚û°Ô∏è Java Enterprise ‚û°Ô∏è EJB Module</li>
<li><strong>MusicLibraryClient</strong>: New Project ‚û°Ô∏è Java with Ant ‚û°Ô∏è Java Application (con una main class)</li>
</ul>
<h2 id="music-library"><a class="header" href="#music-library">Music Library</a></h2>
<p>Creare un nuovo pacchetto Source Packages ‚û°Ô∏è New ‚û°Ô∏è Java Package <code>√¨t.pd2023.musiclibrary</code></p>
<h3 id="definizione-entit√†-e-persistenza"><a class="header" href="#definizione-entit√†-e-persistenza">Definizione entit√† e persistenza</a></h3>
<ul>
<li><code>Song.java</code> definisce un entit√† persistente che identifica un brano musicale.</li>
</ul>
<pre><code class="language-java">//import packages
import static it.pd2022.musiclibrary.Song.TROVA_TUTTE;
@Entity
@NamedQueries({
    @NamedQuery(name = TROVA_TUTTE, query = "SELECT s FROM Song s"),
})
public class Song implements Serializable{
    public static final String TROVA_TUTTE = "Song.trovaTutteCanzoni";
    @Id @GeneratedValue
    private Long ID;
    private String authors;
    private String name;
    private URL url; //link youtube 
    public Song() { }
    public Song(String authors, String name, URL url) {
        this.authors = authors;
        this.name = name;
        this.url = url;
    }
    //Insert code -&gt; getters and setter
    //Insert code -&gt; toString()
}
</code></pre>
<p><strong>Nota</strong>: ottenere i link da youtube utilizzando il tasto <em>Condividi</em> ‚û°Ô∏è <em>Incorpora</em> dal player youtube.</p>
<ul>
<li>Dobbiamo denifire una nuova Persistence Unit in modalit√† JTA: <code>MusicLibraryPU</code>
<ul>
<li>New ‚û°Ô∏è Persistence Unit, e come segue:</li>
</ul>
</li>
</ul>
<pre><code class="language-xml">&lt;?xml version="1.0" encoding="UTF-8"?&gt;
&lt;persistence version="2.1" xmlns="http://xmlns.jcp.org/xml/ns/persistence" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:schemaLocation="http://xmlns.jcp.org/xml/ns/persistence     http://xmlns.jcp.org/xml/ns/persistence/persistence_2_1.xsd"&gt;
  &lt;persistence-unit name="MusicLibraryPU" transaction-type="JTA"&gt;
    &lt;provider&gt;org.eclipse.persistence.jpa.PersistenceProvider&lt;/provider&gt;
    &lt;jta-data-source&gt;java:global/jdbc/MusicLibraryDataSource&lt;/jta-data-source&gt;
    &lt;properties&gt;
      &lt;property name="eclipselink.target-database" value="DERBY"/&gt;
      &lt;property name="eclipselink.ddl-generation" value="drop-and-create-tables"/&gt;
      &lt;property name="eclipselink.logging.level" value="INFO"/&gt;
    &lt;/properties&gt;
  &lt;/persistence-unit&gt;
&lt;/persistence&gt;
</code></pre>
<ul>
<li>Creaiamo un nuovo Singleton istanziato in fase di avvio dell'applicazione che consente l'inizializzazione e la definizione di un nuovo database e datasource per la nostra applicazione: <code>DatabasePopulator.java</code></li>
</ul>
<pre><code class="language-java">@Singleton
@Startup 
@DataSourceDefinition(
    className ="org.apache.derby.jdbc.EmbeddedDataSource", name ="java:global/jdbc/MusicLibraryDataSource",
    user ="APP",
    password ="APP",
    databaseName ="MusicLibraryDB",
    properties = {"connectionAttributes=;create=true"} 
)
public class DatabasePopulator { 
   
    //PER ORA VUOTO
}
</code></pre>
<blockquote>
<p>üöÄ A questo punto la parte base della persistenza √® terminata e possiamo eseguire la build del progetto e il deploy su GlassFish.</p>
</blockquote>
<h3 id="definizione-della-logica-della-nostra-applicazione"><a class="header" href="#definizione-della-logica-della-nostra-applicazione">Definizione della logica della nostra applicazione</a></h3>
<p>Le funzionalit√† dell'applicazione saranno definite in un enterprise java bean stateless chiamato <code>MusicLibrary.java</code>, che saranno offerte ai client (applicazioni Java) tramite l'invocazione di metodi remoti, quindi dovremo definire ed implementare un interfaccia remota <code>MusicLibraryRemote.java</code>.</p>
<pre><code class="language-java">@Stateless
@LocalBean
public class MusicLibrary implements MusicLibraryRemote{
    
    @Inject
    private EntityManager em; 

    public List&lt;Song&gt; findSongs() {
        TypedQuery&lt;Song&gt; query = em.createNamedQuery(Song.TROVA_TUTTE, Song.class);
        return query.getResultList();
    }
    public Song createSong( Song song) {
        em.persist(song);
        return song;
    }
}
</code></pre>
<pre><code class="language-java">@Remote
public interface MusicLibraryRemote {
    public List&lt;Song&gt; findSongs();
    public Song createSong(Song song);
}
</code></pre>
<p>Nella definzione del nostro EJB MusicLibrary utilizziamo l'iniezione di una dipendenza ad un <code>EntityManager</code> di conseguenza dobbiamo definire un metodo per la "produzione" di tale oggetto in una classe <code>DatabaseProducer.java</code> come segue.</p>
<pre><code class="language-java">public class DatabaseProducer {
     
    @Produces
    @PersistenceContext(unitName ="MusicLibraryPU") 
    private EntityManager em;
}

</code></pre>
<ul>
<li>Prima di proseguire dobbiamo include nel nostro progetto la definizione del file <code>beans.xml</code>che ci permette di impostare la disscovery mode dei nostri beans a all.
<ul>
<li>New File ‚û°Ô∏è Contexts and Dependency Injection ‚û°Ô∏è beans.xml, impostare <code>bean-discovery-mode="all"</code></li>
</ul>
</li>
<li>A questo punto possiamo completare il nostro <code>DatabasePopulator.java</code>inserendo nel database alcune canzoni di esempio ed utilizzando l'EJB MusicLibrary. Possiamo inserire la definizione del seguente metodo:</li>
</ul>
<pre><code class="language-java">private Song s1, s2; 
@Inject
private MusicLibrary lib;

@PostConstruct
private void populateDB() {
    try {
        s1 = new Song("Queen","We Are The Champions", new URL("https://www.youtube.com/embed/KXw8CRapg7k"));
        s2 = new Song("Home Free", "Sea Shanty Medley", new URL("https://www.youtube.com/embed/lLGLUSzzuWU"));
        lib.createSong(s1);
        lib.createSong(s2);
    } catch (MalformedURLException ex) {
        Logger.getLogger(DatabasePopulator.class.getName()).log(Level.SEVERE, null, ex);
    }
}
</code></pre>
<blockquote>
<p>üöÄ La parte di logica √® terminata e possiamo eseguire la build del progetto e il deploy su GlassFish.</p>
</blockquote>
<h2 id="music-library-client"><a class="header" href="#music-library-client">Music Library Client</a></h2>
<p>Prima di procedere con lo sviluppo del nostro java client dobbiamo specificare le dipendenze necessarie:</p>
<ul>
<li>1Ô∏è‚É£ Progetto <code>MusicLibrary</code>: Properties ‚û°Ô∏è Libraries ‚û°Ô∏è  Classpath ‚ûï  ‚û°Ô∏è Add Projects...  ‚û°Ô∏è <code>MusicLibrary</code></li>
<li>2Ô∏è‚É£ Libreria <code>gf-client.jar</code>: Properties ‚û°Ô∏è Libraries ‚û°Ô∏è  Classpath ‚ûï  ‚û°Ô∏è Add JAR/Folder ‚û°Ô∏è <code>[USER_HOME]/GlassFish_Server/glassfish/lib/gf-client.jar</code>, la libreria si trova nella vostra installazione di glassfish nel path specificato.</li>
</ul>
<pre><code class="language-java">public class MusicLibraryClient {

    public static void main(String[] args) throws NamingException {
        Context ctx = new InitialContext();
        MusicLibraryRemote ejb = (MusicLibraryRemote) ctx.lookup("java:global/MusicLibrary/MusicLibrary!it.pd2022.musiclibrary.MusicLibraryRemote");
        
        List&lt;Song&gt; lista = ejb.findSongs();
        for(Song s: lista)
            System.out.println(s);
    }
    
}
</code></pre>
<blockquote>
<p>üöÄ Il client della nostra applicazione √® pronto possiamo eseguirlo.
üéØ Output:</p>
<pre><code>run: nov 06, 2022 1:32:13 PM com.sun.enterprise.v3.server.CommonClassLoaderServiceImpl findDerbyClient
INFORMAZIONI: Cannot find javadb client jar file, derby jdbc driver will not be available by default.
Song{ID=2, authors=Home Free, name=Sea Shanty Medley, url=https://www.youtube.com/watch?v=lLGLUSzzuWU&amp;ab_channel=HomeFree}
Song{ID=1, authors=Queen, name=We Are The Champions, url=https://www.youtube.com/watch?v=KXw8CRapg7k&amp;ab_channel=QueenVEVO}
BUILD SUCCESSFUL (total time: 2 seconds)
</code></pre>
</blockquote>
<p><strong>Nota</strong> l'indirizzo JNDI dell'interfaccia remota del bean MusicLibrary pu√≤ essere visualizzato nella console di output di glassfish subito dopo il deploy dell'applicazione.</p>
<h1 id="esercizio-2---music-library-"><a class="header" href="#esercizio-2---music-library-">Esercizio 2 - Music Library++ üéµüìö</a></h1>
<p>Aggiungere le seguenti funzionalit√† al progetto MusicLibrary:</p>
<ol>
<li>
<p>Ampliare la definzione di <code>Song</code> inserendo:</p>
<ul>
<li>anno di rilascio,</li>
<li>numero di visualizzazioni (numero di volte in cui il bravo √® stato riprodotto),</li>
<li>lyrics;</li>
<li>specificare delle nuove NamedQuery che permettano la ricerca delle canzoni per anno di rilascio, nome autore, nome del brano.</li>
</ul>
</li>
<li>
<p>Definire una nuova entit√† <code>Playlist</code> che consente di collezionare molteplici <code>Song</code>, specificando</p>
<ul>
<li>nome,</li>
<li>autore,</li>
<li>tipologia,</li>
<li>descrizione,</li>
<li>data in cui √® stato effettuato l'ultimo aggiornamento.</li>
</ul>
<p>Le playlist possono essere create, modificate, visualizzate, ricercate per tipologia, ed eliminate senza eliminare dal database i brani contenuti.</p>
</li>
<li>
<p>Ampliare la definizione di <code>MusicLibrary</code> per supportare le precedenti nuove entit√† e funzionalit√†.</p>
<ul>
<li>Introdurre la definizione di una metodo <code>play(song_ID)</code> che permette di ottenere la URL di una song, questo metodo va intercettato per aggiornare il numero di volte che un particolare brano viene riprodotto. Modificare il file <code>beans.xml</code> per aggiungere la definizione del nuovo interceptor:</li>
</ul>
<pre><code class="language-xml">  &lt;beans xmlns="http://xmlns.jcp.org/xml/ns/javaee"
        xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
        xsi:schemaLocation="http://xmlns.jcp.org/xml/ns/javaee http://xmlns.jcp.org/xml/ns/javaee/beans_1_1.xsd"
        version="1.1" bean-discovery-mode="all"&gt;
    &lt;interceptors&gt;
       &lt;class&gt;org.agoncal.book.javaee7.chapter02.LoggingInterceptor&lt;/class&gt;
     &lt;/interceptors&gt;
 &lt;/beans&gt;
</code></pre>
<ul>
<li><em>Opzionale</em>: estendere la definizione del metodo play per la riproduzione di un lista di brani ottenuti da una particolare playlist.</li>
</ul>
</li>
</ol>
<p>Mofificare la classe main di <code>MusicLibraryClient</code> per il testing e la verifica di tutte le funzionalit√† di <code>MusicLibrary</code>.</p>
<h1 id="esercizio-3---pdtify--"><a class="header" href="#esercizio-3---pdtify--">Esercizio 3 - PDtify üéµ ‚èØÔ∏è</a></h1>
<p><strong>Obiettivo</strong>: creare un enterprise java application con due moduli principali un modulo di business/persistenza e un modulo di presentazione web che permetta la gestione di una libreria musicale evoluta (playlist) utilizzando come player di riproduzione web le API di Youtube Embedded.</p>
<ul>
<li>‚ö†Ô∏è <strong>prima di procedere effettuare l'undeploy del progetto precedente dal server glassfish</strong>.</li>
<li><code>PDtify</code>: New Project ‚û°Ô∏è Java with Ant ‚û°Ô∏è Java Enterprise ‚û°Ô∏è Enterprise Application</li>
<li>Output in Netbeans:
<ul>
<li><code>PDtify</code> enterprise application.</li>
<li><code>PDtify-ejb</code> un modulo ejb.</li>
<li><code>PDtify-web</code> un modulo web.</li>
</ul>
</li>
<li>Riportare il progetto <code>MusicLibray</code> nel modulo <code>PDtify-ejb</code>.</li>
<li>Costruire un nuovo client web utilizzando una servelet <code>MusicPlayer</code> che sfrutta l'EJB <code>MusicLibrary</code> per offrire attraverso una pagina web tutte le funzionalit√† dell'applicazione. Quando si crea la Servlet specificare <em>Add information to the deployment descriptor (web.xml)</em> passaggio 2 del wizard di creazione della Servlet.</li>
<li><em>Note</em>:
<ul>
<li>riportare nel modulo ejb tutte le definizione di persistence e beans.xml;</li>
<li>quando si eseguono le operazioni di build, deploy, e run del progetto vanno lanciate dal progetto principale entrprise <code>PDtify</code>;</li>
<li>per specificare che di default la index della nostra applicazione sar√† la Servlet <code>MusicPlayer</code> modificare il file <code>PDtify-war/Web Pages/WEB-INF/web.xml</code> come segue:
<pre><code class="language-xml">    &lt;servlet-mapping&gt;
        &lt;servlet-name&gt;MusicPlayer&lt;/servlet-name&gt;
        &lt;url-pattern&gt;/&lt;/url-pattern&gt;
    &lt;/servlet-mapping&gt;
</code></pre>
</li>
</ul>
</li>
<li><code>play()</code>la visualizzazione del metodo play pu√≤ essere ottenuta utilizzando l'embedding della URL di un brano all'interno di un iframe:
<pre><code class="language-java">     Song s =  new Song("Queen","We Are The Champions", new URL("https://www.youtube.com/embed/KXw8CRapg7k"));
     out.println("&lt;iframe width=\"420\""+
                         "height=\"315\"\n" +
                         "src=\""+s.getUrl()+"\"&gt;\n" +
                 "&lt;/iframe&gt;");
</code></pre>
</li>
</ul>
<h1 id="esercizi-bonus"><a class="header" href="#esercizi-bonus">Esercizi Bonus</a></h1>
<h2 id="esercizio-b1---calcolatrice-ejb"><a class="header" href="#esercizio-b1---calcolatrice-ejb">Esercizio B.1 - Calcolatrice EJB</a></h2>
<p>Scrivere un client Java che invoca degli EJB sul server che implementano un servizio di calcolatrice per tipi float. La calcolatrice offre tre metodi, tutti prendono in input due operandi di tipo <code>float</code> e restituiscono un <code>float</code>:</p>
<ul>
<li><code>add(float,float)</code></li>
<li><code>sub(float,float)</code></li>
<li><code>multiply(float,float)</code></li>
</ul>
<p>Il server offre inoltre un servizio di counting <code>count()</code> che restituisce il numero di operazioni effettuate da tutti i clienti dall‚Äôavvio del server. Il client deve offrire da console un interfaccia che permetta di effettuare tutte le operazioni da remoto.</p>
<h2 id="esercizio-b2---calcolatrice-ejb-basata-su-stack"><a class="header" href="#esercizio-b2---calcolatrice-ejb-basata-su-stack">Esercizio B.2 - Calcolatrice EJB basata su stack</a></h2>
<p>Scrivere un client Java che invoca degli Enterprise EJB sul server che implementano un servizio di calcolatrice basata su stack per tipi <code>float</code>. La calcolatrice offre cinque metodi. Tre di questi metodi rappresentano operazioni aritmetiche che non prendono input e operano direttamente sui dati nello stack: <code>add()</code>, <code>sub()</code>, <code>multiply()</code>.
In aggiunta, il server offre il metodovoid <code>push(float)</code> e <code>float pop()</code> per la gestione dello stack. Nota che l‚Äôunico metodo che restituisce valori √® la <code>pop()</code>. Le operazione aritmetiche eseguono implicitamente due <code>pop()</code> per prelevare gli operandi e una <code>push()</code> per salvare il valore di ritorno.</p>
<p>Esempio di esecuzione del servizio:</p>
<ul>
<li><code>push(3)</code>, <code>push(4)</code>, <code>add()</code>, <code>pop()</code> ‚û°Ô∏è 7</li>
<li><code>push(3)</code>, <code>push(4)</code>, <code>multiply()</code>, <code>pop()</code> ‚û°Ô∏è 12</li>
<li><code>push(3)</code>, <code>push(4)</code>, <code>push(1)</code>, <code>add()</code>, <code>pop()</code> ‚û°Ô∏è 5</li>
<li><code>push(3)</code>, <code>push(4)</code>, <code>push(1)</code>, <code>add()</code>, <code>add()</code>, <code>pop()</code> ‚û°Ô∏è 8</li>
</ul>
<p>Avanzato: gestire i meccanismi di attivazione e passivazione.</p>
<h2 id="esercizio-b3---calcolatrice-ejb-basata-su-stack-persistente"><a class="header" href="#esercizio-b3---calcolatrice-ejb-basata-su-stack-persistente">Esercizio B.3 - Calcolatrice EJB basata su stack persistente</a></h2>
<p>Estendere il servizio di calcolatrice basata su stack implementata nell‚Äôesercizio precedente aggiungendo un livello di persistenza dello stack. In particolare, ad ogni operazione, lo stack deve essere salvato su database. All‚Äôinterfaccia del servizio verr√† aggiunto il metodo <code>loadStack(String stackName)</code> e <code>saveStack(String stackName)</code> che consentono all‚Äôutente di caricare lo stack da database . Se il client non invoca la <code>loadStack()</code>, la sessione si avvia con uno stack vuoto. Lo stack puo essere salvato nel formato piu appropriato, anche come stringa.</p>
<p>Al fine di completare l‚Äôesercizo, occorre</p>
<ol>
<li>Implementare il metodo <code>loadStack(String username)</code>.</li>
<li>Implementare il metodo <code>saveStack(String username)</code>.</li>
<li>Implementare un metodo <code>stackList()</code> che restituisce tutti i nomi degli stack
salvati su database.</li>
<li>Implementare un interceptor che, alla fine dell‚Äôinterazione con un client, stampa una
lista dei stackName usati da quell‚Äôutente in quella sessione.</li>
</ol>
<div style="break-before: page; page-break-before: always;"></div><ul>
<li><a href="07-jms.html#contenuti">Contenuti</a></li>
<li><a href="07-jms.html#materiale-bibliografico">Materiale bibliografico</a></li>
<li><a href="07-jms.html#domande-di-riepilogo">Domande di riepilogo</a></li>
</ul>
<h1 id="contenuti-7"><a class="header" href="#contenuti-7">Contenuti</a></h1>
<p><em>Parte 1</em></p>
<ul>
<li>Introduzione
<ul>
<li>Messaging</li>
<li>Java Messaging Service API</li>
<li>Message Producers</li>
<li>Message Consumers</li>
</ul>
</li>
<li>Anatomia di un messaggio</li>
<li>Meccanismi di affidabilit√†</li>
</ul>
<p><em>Parte 2</em></p>
<ul>
<li>Message-Driven Beans</li>
<li>Un esempio conclusivo
<ul>
<li>Il codice</li>
<li>Configurazione</li>
<li>I progetti</li>
</ul>
</li>
<li>Esercizi</li>
</ul>
<h1 id="materiale-bibliografico-5"><a class="header" href="#materiale-bibliografico-5">Materiale bibliografico</a></h1>
<ul>
<li>"Beginning Java Enterprise Edition": Cap. 13</li>
<li><a href="http://docs.oracle.com/cd/E18930_01/html/821-2443/gblyo.html#scrolltoc">Oracle GlassFish Server Message Queue 4.5 Technical Overview</a>. Cap. 1, Cap. 2, Cap. 3, Cap. 4 (cenni)</li>
</ul>
<h1 id="domande-di-riepilogo-5"><a class="header" href="#domande-di-riepilogo-5">Domande di riepilogo</a></h1>
<ul>
<li>Quali sono le principali differenze fra il modello Point-to-Point ed il modello Publish-Subscribe?</li>
<li>Cosa sono i Message-Driven Beans?</li>
<li>Cosa sono gli Administered Objects?</li>
<li>Qual √® la differenza fra Synchronous Delivery e Asynchronous Delivery?</li>
<li>Quali sono i principali meccanismi di affidabilit√†?</li>
<li>Quali eccezioni si possono gestire con gli MDB?</li>
</ul>
<div style="break-before: page; page-break-before: always;"></div><ul>
<li><a href="06-ejb.html#contenuti">Contenuti</a></li>
<li><a href="06-ejb.html#materiale-bibliografico-per-lo-studio">Materiale bibliografico per lo studio</a></li>
<li><a href="06-ejb.html#alcune-domande-di-riepilogo">Alcune domande di riepilogo</a></li>
</ul>
<h1 id="contenuti-8"><a class="header" href="#contenuti-8">Contenuti</a></h1>
<p><em>Parte 1</em></p>
<ul>
<li>Introduzione agli EJB</li>
<li>Come sono fatti gli EJB</li>
<li>Tipi di EJB
<ul>
<li>Stateless</li>
<li>Stateful</li>
<li>Singleton</li>
</ul>
</li>
<li>Come usare un EJB</li>
</ul>
<p><em>Parte 2</em></p>
<ul>
<li>Ciclo di Vita dei Session Beans</li>
<li>Autorizzazioni
<ul>
<li>Autorizzazione dichiarativa</li>
<li>Autorizzazione da programma</li>
</ul>
</li>
<li>Transazioni
<ul>
<li>Cosa sono</li>
<li>Container-managed</li>
<li>Bean-Managed</li>
</ul>
</li>
<li>Esercizi EJB con NetBeans</li>
</ul>
<h1 id="materiale-bibliografico-per-lo-studio-2"><a class="header" href="#materiale-bibliografico-per-lo-studio-2">Materiale bibliografico per lo studio</a></h1>
<ul>
<li>"Beginning Java Enterprise Edition": Cap. 7, escludere da pag 247 a pag 256</li>
<li>"Beginning Java Enterprise Edition": Cap. 8, escludere Timer Service</li>
<li>"Beginning Java Enterprise Edition": Cap. 9,  solo "Understanding Transactions", "Transaction Support in EJB",  "Container-managed transactions" fino a pag. 296</li>
<li><a href="https://www.oracle.com/technical-resources/articles/java/cdi-javaee-bien.html"><code>@Inject</code> vs <code>@EJB</code></a></li>
<li><a href="https://javaee.github.io/tutorial/ejb-basicexamples003.html">Managing Concurrent Access in a Singleton Session Bean</a></li>
</ul>
<h1 id="alcune-domande-di-riepilogo-2"><a class="header" href="#alcune-domande-di-riepilogo-2">Alcune domande di riepilogo</a></h1>
<ul>
<li>Qual √® il ciclo di vita di un bean?</li>
<li>Qual √® il vantaggio dell'utilizzo di JNDI?</li>
<li>Quali sono le differenze tra i tre differenti tipi di beans in termini di chiamate dai clients?</li>
<li>Qual √® il caso d'uso pi√π comune per un singleton bean?</li>
<li>Qual √® il vantaggio dell'suo del: "Programmatic Authorization"?</li>
<li>Quali sono le principali differenze fra Container-Managed e Bean-managed transactions?</li>
<li>Packaging e deploying</li>
<li>Come invocare EJB</li>
</ul>
<div style="break-before: page; page-break-before: always;"></div><ul>
<li><a href="07-ejb-lab.html#esercizio-0---hello-world-ejb">Esercizio 0 - Hello World EJB</a></li>
<li><a href="07-ejb-lab.html#esercizio-1---music-library--warm-up-">Esercizio 1 - Music Library üéµüìö (warm-up üèã)</a>
<ul>
<li><a href="07-ejb-lab.html#music-library">Music Library</a>
<ul>
<li><a href="07-ejb-lab.html#definizione-entit%C3%A0-e-persistenza">Definizione entit√† e persistenza</a></li>
<li><a href="07-ejb-lab.html#definizione-della-logica-della-nostra-applicazione">Definizione della logica della nostra applicazione</a></li>
</ul>
</li>
<li><a href="07-ejb-lab.html#music-library-client">Music Library Client</a></li>
</ul>
</li>
<li><a href="07-ejb-lab.html#esercizio-2---music-library-">Esercizio 2 - Music Library++ üéµüìö</a></li>
<li><a href="07-ejb-lab.html#esercizio-3---pdtify--%EF%B8%8F">Esercizio 3 - PDtify üéµ ‚èØÔ∏è</a></li>
<li><a href="07-ejb-lab.html#esercizi-bonus">Esercizi Bonus</a>
<ul>
<li><a href="07-ejb-lab.html#esercizio-b1---calcolatrice-ejb">Esercizio B.1 - Calcolatrice EJB</a></li>
<li><a href="07-ejb-lab.html#esercizio-b2---calcolatrice-ejb-basata-su-stack">Esercizio B.2 - Calcolatrice EJB basata su stack</a></li>
<li><a href="07-ejb-lab.html#esercizio-b3---calcolatrice-ejb-basata-su-stack-persistente">Esercizio B.3 - Calcolatrice EJB basata su stack persistente</a></li>
</ul>
</li>
</ul>
<blockquote>
<p>üöÄ Se avete problemi con la lookup dei vostri bean potete verificare che state utilizzando il dominio corretto con i parametri di default nel file <code>[USER_HOME]/GlassFish_Server/glassfish/domains/domain1/config/domain.xml</code>. Il pacchetto <code>[USER_HOME]/GlassFish_Server/glassfish/lib/gf-client.jar</code> carica configurazioni per l'InitialContext di default (<a href="https://docs.oracle.com/cd/E26576_01/doc.312/e24928/overview.htm#GSADG00004">GlassFish Server Administration Guide</a>).</p>
</blockquote>
<blockquote>
<p>‚ùì Esempio di setting della porta per il servizio IIOP necessario per il discovery di RMI:</p>
</blockquote>
<pre><code class="language-java">Properties props = new Properties();
props.setProperty("java.naming.factory.initial",
"com.sun.enterprise.naming.SerialInitContextFactory");
props.setProperty("java.naming.factory.url.pkgs",
"com.sun.enterprise.naming");
props.setProperty("java.naming.factory.state",
"com.sun.corba.ee.impl.presentation.rmi.JNDIStateFactoryImpl");
props.setProperty("org.omg.CORBA.ORBInitialHost", "localhost");
props.setProperty("org.omg.CORBA.ORBInitialPort", "3700");
Context ctx = new InitialContext(props);
</code></pre>
<h1 id="esercizio-0---hello-world-ejb-1"><a class="header" href="#esercizio-0---hello-world-ejb-1">Esercizio 0 - Hello World EJB</a></h1>
<p>Ripetere l'esercitazione visto a lezione per la definizione di un nuovo <em>stateless</em> EJB <code>HelloWorld</code> che implementa un metodo <code>sayHello(String text)</code> che restituisce una stringa di saluto. Il client deve essere un applicazione Java che invoca il metodo remoto <code>sayHello("Hello my name is "+name)</code> e stampa il risultato a console.</p>
<blockquote>
<p>üöÄ Includere nell'applicazione Java SE Client il pacchetto <code>[USER_HOME]/GlassFish_Server/glassfish/lib/gf-client.jar</code> per la lookup del bean remoto. Definendo la sua interfaccia remota <code>HelloWorldRemote.java</code> come segue:</p>
</blockquote>
<pre><code class="language-java">@Remote
public interface HelloWorldEJBRemote{
    public String sayHello(String name);
}
</code></pre>
<h1 id="esercizio-1---music-library--warm-up--1"><a class="header" href="#esercizio-1---music-library--warm-up--1">Esercizio 1 - Music Library üéµüìö (warm-up üèã)</a></h1>
<p>Creare due progetti:</p>
<ul>
<li><strong>MusicLibrary</strong>: New Project ‚û°Ô∏è Java with Ant ‚û°Ô∏è Java Enterprise ‚û°Ô∏è EJB Module</li>
<li><strong>MusicLibraryClient</strong>: New Project ‚û°Ô∏è Java with Ant ‚û°Ô∏è Java Application (con una main class)</li>
</ul>
<h2 id="music-library-1"><a class="header" href="#music-library-1">Music Library</a></h2>
<p>Creare un nuovo pacchetto Source Packages ‚û°Ô∏è New ‚û°Ô∏è Java Package <code>√¨t.pd2023.musiclibrary</code></p>
<h3 id="definizione-entit√†-e-persistenza-1"><a class="header" href="#definizione-entit√†-e-persistenza-1">Definizione entit√† e persistenza</a></h3>
<ul>
<li><code>Song.java</code> definisce un entit√† persistente che identifica un brano musicale.</li>
</ul>
<pre><code class="language-java">//import packages
import static it.pd2022.musiclibrary.Song.TROVA_TUTTE;
@Entity
@NamedQueries({
    @NamedQuery(name = TROVA_TUTTE, query = "SELECT s FROM Song s"),
})
public class Song implements Serializable{
    public static final String TROVA_TUTTE = "Song.trovaTutteCanzoni";
    @Id @GeneratedValue
    private Long ID;
    private String authors;
    private String name;
    private URL url; //link youtube 
    public Song() { }
    public Song(String authors, String name, URL url) {
        this.authors = authors;
        this.name = name;
        this.url = url;
    }
    //Insert code -&gt; getters and setter
    //Insert code -&gt; toString()
}
</code></pre>
<p><strong>Nota</strong>: ottenere i link da youtube utilizzando il tasto <em>Condividi</em> ‚û°Ô∏è <em>Incorpora</em> dal player youtube.</p>
<ul>
<li>Dobbiamo denifire una nuova Persistence Unit in modalit√† JTA: <code>MusicLibraryPU</code>
<ul>
<li>New ‚û°Ô∏è Persistence Unit, e come segue:</li>
</ul>
</li>
</ul>
<pre><code class="language-xml">&lt;?xml version="1.0" encoding="UTF-8"?&gt;
&lt;persistence version="2.1" xmlns="http://xmlns.jcp.org/xml/ns/persistence" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:schemaLocation="http://xmlns.jcp.org/xml/ns/persistence     http://xmlns.jcp.org/xml/ns/persistence/persistence_2_1.xsd"&gt;
  &lt;persistence-unit name="MusicLibraryPU" transaction-type="JTA"&gt;
    &lt;provider&gt;org.eclipse.persistence.jpa.PersistenceProvider&lt;/provider&gt;
    &lt;jta-data-source&gt;java:global/jdbc/MusicLibraryDataSource&lt;/jta-data-source&gt;
    &lt;properties&gt;
      &lt;property name="eclipselink.target-database" value="DERBY"/&gt;
      &lt;property name="eclipselink.ddl-generation" value="drop-and-create-tables"/&gt;
      &lt;property name="eclipselink.logging.level" value="INFO"/&gt;
    &lt;/properties&gt;
  &lt;/persistence-unit&gt;
&lt;/persistence&gt;
</code></pre>
<ul>
<li>Creaiamo un nuovo Singleton istanziato in fase di avvio dell'applicazione che consente l'inizializzazione e la definizione di un nuovo database e datasource per la nostra applicazione: <code>DatabasePopulator.java</code></li>
</ul>
<pre><code class="language-java">@Singleton
@Startup 
@DataSourceDefinition(
    className ="org.apache.derby.jdbc.EmbeddedDataSource", name ="java:global/jdbc/MusicLibraryDataSource",
    user ="APP",
    password ="APP",
    databaseName ="MusicLibraryDB",
    properties = {"connectionAttributes=;create=true"} 
)
public class DatabasePopulator { 
   
    //PER ORA VUOTO
}
</code></pre>
<blockquote>
<p>üöÄ A questo punto la parte base della persistenza √® terminata e possiamo eseguire la build del progetto e il deploy su GlassFish.</p>
</blockquote>
<h3 id="definizione-della-logica-della-nostra-applicazione-1"><a class="header" href="#definizione-della-logica-della-nostra-applicazione-1">Definizione della logica della nostra applicazione</a></h3>
<p>Le funzionalit√† dell'applicazione saranno definite in un enterprise java bean stateless chiamato <code>MusicLibrary.java</code>, che saranno offerte ai client (applicazioni Java) tramite l'invocazione di metodi remoti, quindi dovremo definire ed implementare un interfaccia remota <code>MusicLibraryRemote.java</code>.</p>
<pre><code class="language-java">@Stateless
@LocalBean
public class MusicLibrary implements MusicLibraryRemote{
    
    @Inject
    private EntityManager em; 

    public List&lt;Song&gt; findSongs() {
        TypedQuery&lt;Song&gt; query = em.createNamedQuery(Song.TROVA_TUTTE, Song.class);
        return query.getResultList();
    }
    public Song createSong( Song song) {
        em.persist(song);
        return song;
    }
}
</code></pre>
<pre><code class="language-java">@Remote
public interface MusicLibraryRemote {
    public List&lt;Song&gt; findSongs();
    public Song createSong(Song song);
}
</code></pre>
<p>Nella definzione del nostro EJB MusicLibrary utilizziamo l'iniezione di una dipendenza ad un <code>EntityManager</code> di conseguenza dobbiamo definire un metodo per la "produzione" di tale oggetto in una classe <code>DatabaseProducer.java</code> come segue.</p>
<pre><code class="language-java">public class DatabaseProducer {
     
    @Produces
    @PersistenceContext(unitName ="MusicLibraryPU") 
    private EntityManager em;
}

</code></pre>
<ul>
<li>Prima di proseguire dobbiamo include nel nostro progetto la definizione del file <code>beans.xml</code>che ci permette di impostare la disscovery mode dei nostri beans a all.
<ul>
<li>New File ‚û°Ô∏è Contexts and Dependency Injection ‚û°Ô∏è beans.xml, impostare <code>bean-discovery-mode="all"</code></li>
</ul>
</li>
<li>A questo punto possiamo completare il nostro <code>DatabasePopulator.java</code>inserendo nel database alcune canzoni di esempio ed utilizzando l'EJB MusicLibrary. Possiamo inserire la definizione del seguente metodo:</li>
</ul>
<pre><code class="language-java">private Song s1, s2; 
@Inject
private MusicLibrary lib;

@PostConstruct
private void populateDB() {
    try {
        s1 = new Song("Queen","We Are The Champions", new URL("https://www.youtube.com/embed/KXw8CRapg7k"));
        s2 = new Song("Home Free", "Sea Shanty Medley", new URL("https://www.youtube.com/embed/lLGLUSzzuWU"));
        lib.createSong(s1);
        lib.createSong(s2);
    } catch (MalformedURLException ex) {
        Logger.getLogger(DatabasePopulator.class.getName()).log(Level.SEVERE, null, ex);
    }
}
</code></pre>
<blockquote>
<p>üöÄ La parte di logica √® terminata e possiamo eseguire la build del progetto e il deploy su GlassFish.</p>
</blockquote>
<h2 id="music-library-client-1"><a class="header" href="#music-library-client-1">Music Library Client</a></h2>
<p>Prima di procedere con lo sviluppo del nostro java client dobbiamo specificare le dipendenze necessarie:</p>
<ul>
<li>1Ô∏è‚É£ Progetto <code>MusicLibrary</code>: Properties ‚û°Ô∏è Libraries ‚û°Ô∏è  Classpath ‚ûï  ‚û°Ô∏è Add Projects...  ‚û°Ô∏è <code>MusicLibrary</code></li>
<li>2Ô∏è‚É£ Libreria <code>gf-client.jar</code>: Properties ‚û°Ô∏è Libraries ‚û°Ô∏è  Classpath ‚ûï  ‚û°Ô∏è Add JAR/Folder ‚û°Ô∏è <code>[USER_HOME]/GlassFish_Server/glassfish/lib/gf-client.jar</code>, la libreria si trova nella vostra installazione di glassfish nel path specificato.</li>
</ul>
<pre><code class="language-java">public class MusicLibraryClient {

    public static void main(String[] args) throws NamingException {
        Context ctx = new InitialContext();
        MusicLibraryRemote ejb = (MusicLibraryRemote) ctx.lookup("java:global/MusicLibrary/MusicLibrary!it.pd2022.musiclibrary.MusicLibraryRemote");
        
        List&lt;Song&gt; lista = ejb.findSongs();
        for(Song s: lista)
            System.out.println(s);
    }
    
}
</code></pre>
<blockquote>
<p>üöÄ Il client della nostra applicazione √® pronto possiamo eseguirlo.
üéØ Output:</p>
<pre><code>run: nov 06, 2022 1:32:13 PM com.sun.enterprise.v3.server.CommonClassLoaderServiceImpl findDerbyClient
INFORMAZIONI: Cannot find javadb client jar file, derby jdbc driver will not be available by default.
Song{ID=2, authors=Home Free, name=Sea Shanty Medley, url=https://www.youtube.com/watch?v=lLGLUSzzuWU&amp;ab_channel=HomeFree}
Song{ID=1, authors=Queen, name=We Are The Champions, url=https://www.youtube.com/watch?v=KXw8CRapg7k&amp;ab_channel=QueenVEVO}
BUILD SUCCESSFUL (total time: 2 seconds)
</code></pre>
</blockquote>
<p><strong>Nota</strong> l'indirizzo JNDI dell'interfaccia remota del bean MusicLibrary pu√≤ essere visualizzato nella console di output di glassfish subito dopo il deploy dell'applicazione.</p>
<h1 id="esercizio-2---music-library--1"><a class="header" href="#esercizio-2---music-library--1">Esercizio 2 - Music Library++ üéµüìö</a></h1>
<p>Aggiungere le seguenti funzionalit√† al progetto MusicLibrary:</p>
<ol>
<li>
<p>Ampliare la definzione di <code>Song</code> inserendo:</p>
<ul>
<li>anno di rilascio,</li>
<li>numero di visualizzazioni (numero di volte in cui il bravo √® stato riprodotto),</li>
<li>lyrics;</li>
<li>specificare delle nuove NamedQuery che permettano la ricerca delle canzoni per anno di rilascio, nome autore, nome del brano.</li>
</ul>
</li>
<li>
<p>Definire una nuova entit√† <code>Playlist</code> che consente di collezionare molteplici <code>Song</code>, specificando</p>
<ul>
<li>nome,</li>
<li>autore,</li>
<li>tipologia,</li>
<li>descrizione,</li>
<li>data in cui √® stato effettuato l'ultimo aggiornamento.</li>
</ul>
<p>Le playlist possono essere create, modificate, visualizzate, ricercate per tipologia, ed eliminate senza eliminare dal database i brani contenuti.</p>
</li>
<li>
<p>Ampliare la definizione di <code>MusicLibrary</code> per supportare le precedenti nuove entit√† e funzionalit√†.</p>
<ul>
<li>Introdurre la definizione di una metodo <code>play(song_ID)</code> che permette di ottenere la URL di una song, questo metodo va intercettato per aggiornare il numero di volte che un particolare brano viene riprodotto. Modificare il file <code>beans.xml</code> per aggiungere la definizione del nuovo interceptor:</li>
</ul>
<pre><code class="language-xml">  &lt;beans xmlns="http://xmlns.jcp.org/xml/ns/javaee"
        xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
        xsi:schemaLocation="http://xmlns.jcp.org/xml/ns/javaee http://xmlns.jcp.org/xml/ns/javaee/beans_1_1.xsd"
        version="1.1" bean-discovery-mode="all"&gt;
    &lt;interceptors&gt;
       &lt;class&gt;org.agoncal.book.javaee7.chapter02.LoggingInterceptor&lt;/class&gt;
     &lt;/interceptors&gt;
 &lt;/beans&gt;
</code></pre>
<ul>
<li><em>Opzionale</em>: estendere la definizione del metodo play per la riproduzione di un lista di brani ottenuti da una particolare playlist.</li>
</ul>
</li>
</ol>
<p>Mofificare la classe main di <code>MusicLibraryClient</code> per il testing e la verifica di tutte le funzionalit√† di <code>MusicLibrary</code>.</p>
<h1 id="esercizio-3---pdtify---1"><a class="header" href="#esercizio-3---pdtify---1">Esercizio 3 - PDtify üéµ ‚èØÔ∏è</a></h1>
<p><strong>Obiettivo</strong>: creare un enterprise java application con due moduli principali un modulo di business/persistenza e un modulo di presentazione web che permetta la gestione di una libreria musicale evoluta (playlist) utilizzando come player di riproduzione web le API di Youtube Embedded.</p>
<ul>
<li>‚ö†Ô∏è <strong>prima di procedere effettuare l'undeploy del progetto precedente dal server glassfish</strong>.</li>
<li><code>PDtify</code>: New Project ‚û°Ô∏è Java with Ant ‚û°Ô∏è Java Enterprise ‚û°Ô∏è Enterprise Application</li>
<li>Output in Netbeans:
<ul>
<li><code>PDtify</code> enterprise application.</li>
<li><code>PDtify-ejb</code> un modulo ejb.</li>
<li><code>PDtify-web</code> un modulo web.</li>
</ul>
</li>
<li>Riportare il progetto <code>MusicLibray</code> nel modulo <code>PDtify-ejb</code>.</li>
<li>Costruire un nuovo client web utilizzando una servelet <code>MusicPlayer</code> che sfrutta l'EJB <code>MusicLibrary</code> per offrire attraverso una pagina web tutte le funzionalit√† dell'applicazione. Quando si crea la Servlet specificare <em>Add information to the deployment descriptor (web.xml)</em> passaggio 2 del wizard di creazione della Servlet.</li>
<li><em>Note</em>:
<ul>
<li>riportare nel modulo ejb tutte le definizione di persistence e beans.xml;</li>
<li>quando si eseguono le operazioni di build, deploy, e run del progetto vanno lanciate dal progetto principale entrprise <code>PDtify</code>;</li>
<li>per specificare che di default la index della nostra applicazione sar√† la Servlet <code>MusicPlayer</code> modificare il file <code>PDtify-war/Web Pages/WEB-INF/web.xml</code> come segue:
<pre><code class="language-xml">    &lt;servlet-mapping&gt;
        &lt;servlet-name&gt;MusicPlayer&lt;/servlet-name&gt;
        &lt;url-pattern&gt;/&lt;/url-pattern&gt;
    &lt;/servlet-mapping&gt;
</code></pre>
</li>
</ul>
</li>
<li><code>play()</code>la visualizzazione del metodo play pu√≤ essere ottenuta utilizzando l'embedding della URL di un brano all'interno di un iframe:
<pre><code class="language-java">     Song s =  new Song("Queen","We Are The Champions", new URL("https://www.youtube.com/embed/KXw8CRapg7k"));
     out.println("&lt;iframe width=\"420\""+
                         "height=\"315\"\n" +
                         "src=\""+s.getUrl()+"\"&gt;\n" +
                 "&lt;/iframe&gt;");
</code></pre>
</li>
</ul>
<h1 id="esercizi-bonus-1"><a class="header" href="#esercizi-bonus-1">Esercizi Bonus</a></h1>
<h2 id="esercizio-b1---calcolatrice-ejb-1"><a class="header" href="#esercizio-b1---calcolatrice-ejb-1">Esercizio B.1 - Calcolatrice EJB</a></h2>
<p>Scrivere un client Java che invoca degli EJB sul server che implementano un servizio di calcolatrice per tipi float. La calcolatrice offre tre metodi, tutti prendono in input due operandi di tipo <code>float</code> e restituiscono un <code>float</code>:</p>
<ul>
<li><code>add(float,float)</code></li>
<li><code>sub(float,float)</code></li>
<li><code>multiply(float,float)</code></li>
</ul>
<p>Il server offre inoltre un servizio di counting <code>count()</code> che restituisce il numero di operazioni effettuate da tutti i clienti dall‚Äôavvio del server. Il client deve offrire da console un interfaccia che permetta di effettuare tutte le operazioni da remoto.</p>
<h2 id="esercizio-b2---calcolatrice-ejb-basata-su-stack-1"><a class="header" href="#esercizio-b2---calcolatrice-ejb-basata-su-stack-1">Esercizio B.2 - Calcolatrice EJB basata su stack</a></h2>
<p>Scrivere un client Java che invoca degli Enterprise EJB sul server che implementano un servizio di calcolatrice basata su stack per tipi <code>float</code>. La calcolatrice offre cinque metodi. Tre di questi metodi rappresentano operazioni aritmetiche che non prendono input e operano direttamente sui dati nello stack: <code>add()</code>, <code>sub()</code>, <code>multiply()</code>.
In aggiunta, il server offre il metodovoid <code>push(float)</code> e <code>float pop()</code> per la gestione dello stack. Nota che l‚Äôunico metodo che restituisce valori √® la <code>pop()</code>. Le operazione aritmetiche eseguono implicitamente due <code>pop()</code> per prelevare gli operandi e una <code>push()</code> per salvare il valore di ritorno.</p>
<p>Esempio di esecuzione del servizio:</p>
<ul>
<li><code>push(3)</code>, <code>push(4)</code>, <code>add()</code>, <code>pop()</code> ‚û°Ô∏è 7</li>
<li><code>push(3)</code>, <code>push(4)</code>, <code>multiply()</code>, <code>pop()</code> ‚û°Ô∏è 12</li>
<li><code>push(3)</code>, <code>push(4)</code>, <code>push(1)</code>, <code>add()</code>, <code>pop()</code> ‚û°Ô∏è 5</li>
<li><code>push(3)</code>, <code>push(4)</code>, <code>push(1)</code>, <code>add()</code>, <code>add()</code>, <code>pop()</code> ‚û°Ô∏è 8</li>
</ul>
<p>Avanzato: gestire i meccanismi di attivazione e passivazione.</p>
<h2 id="esercizio-b3---calcolatrice-ejb-basata-su-stack-persistente-1"><a class="header" href="#esercizio-b3---calcolatrice-ejb-basata-su-stack-persistente-1">Esercizio B.3 - Calcolatrice EJB basata su stack persistente</a></h2>
<p>Estendere il servizio di calcolatrice basata su stack implementata nell‚Äôesercizio precedente aggiungendo un livello di persistenza dello stack. In particolare, ad ogni operazione, lo stack deve essere salvato su database. All‚Äôinterfaccia del servizio verr√† aggiunto il metodo <code>loadStack(String stackName)</code> e <code>saveStack(String stackName)</code> che consentono all‚Äôutente di caricare lo stack da database . Se il client non invoca la <code>loadStack()</code>, la sessione si avvia con uno stack vuoto. Lo stack puo essere salvato nel formato piu appropriato, anche come stringa.</p>
<p>Al fine di completare l‚Äôesercizo, occorre</p>
<ol>
<li>Implementare il metodo <code>loadStack(String username)</code>.</li>
<li>Implementare il metodo <code>saveStack(String username)</code>.</li>
<li>Implementare un metodo <code>stackList()</code> che restituisce tutti i nomi degli stack
salvati su database.</li>
<li>Implementare un interceptor che, alla fine dell‚Äôinterazione con un client, stampa una
lista dei stackName usati da quell‚Äôutente in quella sessione.</li>
</ol>
<div style="break-before: page; page-break-before: always;"></div><ul>
<li><a href="08-jms-lab.html#esercizio-0">Esercizio 0</a></li>
<li><a href="08-jms-lab.html#esercizio-1">Esercizio 1</a></li>
<li><a href="08-jms-lab.html#esercizio-2">Esercizio 2</a></li>
<li><a href="08-jms-lab.html#esercizio-3">Esercizio 3</a></li>
<li><a href="08-jms-lab.html#esercizio-4---pdtify--%EF%B8%8F">Esercizio 4 - PDtify üéµ ‚èØÔ∏è</a></li>
</ul>
<h1 id="esercizio-0"><a class="header" href="#esercizio-0">Esercizio 0</a></h1>
<ul>
<li>Riferimento: org.agoncal.book.javaee7.chapter13</li>
<li>New Project ‚û°Ô∏è Java with Ant ‚û°Ô∏è Java Application</li>
<li>Aggiungere le dipendenze: <code>Java EE7 API Library</code> e <code>gf-client.jar</code></li>
</ul>
<ol>
<li>
<p>Definire un nuovo wrapper per i messaggi relativi ad un ordine, come segue:</p>
<pre><code class="language-java">public class OrderDTO implements Serializable {

private Long orderId;
private Date creationDate;
private String customerName;
private Float totalAmount;

public OrderDTO() {
}

public OrderDTO(Long orderId, Date creationDate, String customerName, Float totalAmount) {
    this.orderId = orderId;
    this.creationDate = creationDate;
    this.customerName = customerName;
    this.totalAmount = totalAmount;
}

//Getters and setters
//toString()
}
</code></pre>
</li>
<li>
<p>Definire un Producer di messaggi, come segue:</p>
<pre><code class="language-java">public class OrderProducer {

public static void main(String[] args) throws NamingException {
    // Creates an orderDto with a total amount parameter
    float value = 10.0;
    Float totalAmount = Float.valueOf(10);
    OrderDTO order = new OrderDTO(1234l, new Date(), "Serge Gainsbourg", totalAmount);

    // Gets the JNDI context
    Context jndiContext = new InitialContext();

    // Looks up the administered objects
    ConnectionFactory connectionFactory = (ConnectionFactory) jndiContext.lookup("jms/javaee7/ConnectionFactory");
    Destination topic = (Destination) jndiContext.lookup("jms/javaee7/Topic");

    try (JMSContext jmsContext = connectionFactory.createContext()) {
    // Sends an object message to the topic
    jmsContext.createProducer().setProperty("orderAmount", totalAmount).send(topic, order);
    System.out.println("\nOrder sent : " + order.toString());
    }
 }
}
</code></pre>
</li>
<li>
<p>Definire un Consumer di messaggi, come segue:</p>
<pre><code class="language-java"> public class OrderConsumer {
 public static void main(String[] args) throws NamingException {

     // Gets the JNDI context
     Context jndiContext = new InitialContext();

     // Looks up the administered objects
     ConnectionFactory connectionFactory = (ConnectionFactory) jndiContext.lookup("jms/javaee7/ConnectionFactory");
     Destination topic = (Destination) jndiContext.lookup("jms/javaee7/Topic");

     // Loops to receive the messages
     System.out.println("\nInfinite loop. Waiting for a message...");
     try (JMSContext jmsContext = connectionFactory.createContext()) {
     while (true) {
         OrderDTO order = jmsContext.createConsumer(topic).receiveBody(OrderDTO.class);
         System.out.println("Order received: " + order);
     }
     }
 }
 }
</code></pre>
</li>
</ol>
<blockquote>
<p>üöÄ A questo punto √® possibile eseguire prima il Consumer e poi il Producer.</p>
</blockquote>
<h1 id="esercizio-1"><a class="header" href="#esercizio-1">Esercizio 1</a></h1>
<p>Scrivere un client Java che produce dei messaggi per un Topic di messaging su server Enterprise. Il client invia un messaggio con l‚Äôordine per la costruzione di una moto, che √® costituita da diverse componenti:</p>
<ul>
<li>Nome modello</li>
<li>Nome telaio</li>
<li>Nome pneumatici</li>
</ul>
<p>Il server deve implementare attraverso un Message Driven Bean un servizio di notifica degli ordini, stampando a video il nome del modello della moto, del telaio e degli pneumatici. Il client deve offrire da console un‚Äôinterfaccia che permetta di effettuare tutte le operazioni da remoto.</p>
<p>Note</p>
<ul>
<li>La ConnectionFactory deve chiamarsi: <code>jms/javaee7/ConnectionFactory</code></li>
<li>Il Topic deve chiamarsi: <code>jms/javaee7/Topic</code></li>
</ul>
<h1 id="esercizio-2"><a class="header" href="#esercizio-2">Esercizio 2</a></h1>
<p>Estendere l‚Äôesercizio precedente attraverso l‚Äôimplementazione di un servizio di persistenza degli ordini che salvi su una tabella del database tutti gli ordini arrivati al server. Aggiungere un Singleton che popoli il database con 2 ordini.</p>
<p>Note</p>
<ul>
<li>PersistentUnit e DB devono chiamarsi rispettivamente MotoPU e MotoDB</li>
</ul>
<h1 id="esercizio-3"><a class="header" href="#esercizio-3">Esercizio 3</a></h1>
<p>Estendere l‚Äôesercizio precedente aggiungendo un client Java che riceve i messaggi degli ordini delle moto e stampa li stampa a video; provare a ricevere tutti i messaggi inviati sul topic anche prima della sottoscrizione utilizzando un DurableConsumer.</p>
<pre><code class="language-java"> try (JMSContext jmsContext = connectionFactory.createContext()) {
    jmsContext.setClientID("uniqueID");
    JMSConsumer topicSubscriber = jmsContext.createDurableConsumer((Topic) topic, "uniqueID");
    OrderDTO order = topicSubscriber.receiveBody(OrderDTO.class);
    System.out.println("Order received: " + order);
    topicSubscriber.close();
}
</code></pre>
<h1 id="esercizio-4---pdtify--"><a class="header" href="#esercizio-4---pdtify--">Esercizio 4 - PDtify üéµ ‚èØÔ∏è</a></h1>
<p>Definire una nuova servlet <code>Player</code> che si occupa di visualizzare il player youtube per un particolare brano o una playlist.</p>
<ul>
<li><em>Input</em>: due parametri nel metodo GET <code>?id=x&amp;type=song|playlist</code>:
<ul>
<li><em>song</em>  viene visualizzato a tutto schermo il player youtube;</li>
<li><em>playlist</em> vengono visualizzati tutti i brani in una tabella, e mostra un tasto play per ogni brano.</li>
</ul>
</li>
</ul>
<p>Quando la servlet viene caricata in modalit√† <em>song</em> viene inviato un nuovo messaggio sul Topic <code>jsm/musicplayer/Player</code> (utilizzare la factory di default di installazione di glassfish) contenete l'identificativo del brano. Se la servlet viene caricata in modalit√† <em>playlist</em>  si invia un messaggio sempre sullo stesso topic con l'identificativo della playlist.
La gestione dei messaggi avviene tramite l'utilizzo di MDB e degli eventi, per ogni messaggio si genera un messaggio di log visualizzato nella console di glassfish.</p>
<p>Sviluppare il progetto come segue:</p>
<ul>
<li>
<p>Definire due nuovi Qualifier <code>SongEvent</code> e <code>PlaylistEvent</code>.</p>
</li>
<li>
<p>Definire un wrapper di messaggi <code>MessageWrapper</code> che permette di memorizzare l'id di un brano o di una playlist ed il relativo tipo di messaggio song/playlist.</p>
</li>
<li>
<p>Definire un nuovo message-driven bean <code>MusicLibraryMDB</code> che implementa <code>MessageListener</code>, per ogni messaggio ricevuto (MessageWrapper) si esegue il fire di un nuovo evento con body la relativa Song o Playlist.</p>
</li>
<li>
<p>Definire due nuove classi <code>SongNotification</code>e <code>PlaylistNotification</code> che definiscono un singolo metodo <code>notify</code> che definisce un'opportuna <code>@Observes</code> di un entit√† <code>Song</code> o <code>Playlist</code> (parametro del metodo) con l'obiettivo di visualizzare un messaggio di log.</p>
<pre><code class="language-java">    public class PlaySongNotification {
        public void notify(@Observes Song s){
            System.out.println("Playing song "+s.getName());
        }
    }
</code></pre>
</li>
<li>
<p>Definire un nuovo stateless EJB <code>EventProducer</code> che consente di inviare messaggi su Topic <code>jsm/musicplayer/Player</code>.</p>
</li>
<li>
<p>Definire una nuova servlet <code>Player</code>che si comporta come descritto ed utilizza l'<code>EventProducer</code> per notificare il play di un brano.</p>
</li>
<li>
<p>Definire un client Java <code>MDBtest</code> nel package test del ptrogetto EJB che definire un metodo main nel quale si esegue il test di tutte le funzionalit√† di scambio di messaggi definiti (aggiungere il file gf-client.jar come dipendenza).</p>
</li>
<li>
<p>Modificare la servlet <code>MusicPlayer</code> al fine di utilizzare la nuova servlet <code>Player</code>per effettuare il play di un brano o una playlist.</p>
</li>
</ul>
<div style="break-before: page; page-break-before: always;"></div><ul>
<li><a href="08-ws.html#contenuti">Contenuti</a></li>
<li><a href="08-ws.html#materiale-bibliografico">Materiale bibliografico</a></li>
<li><a href="08-ws.html#domande-di-riepilogo">Domande di riepilogo</a></li>
</ul>
<h1 id="contenuti-9"><a class="header" href="#contenuti-9">Contenuti</a></h1>
<p><em>Parte 1</em></p>
<ul>
<li>Service-Oriented Architecture</li>
<li>I Web Services
<ul>
<li>Definizioni</li>
<li>I ruoli nei WS</li>
</ul>
</li>
<li>Gli standard
<ul>
<li>WSDL</li>
<li>SOAP</li>
<li>UDDI</li>
</ul>
</li>
<li>Le specifiche di WS</li>
</ul>
<p><em>Parte 2</em></p>
<ul>
<li>WS in Java
<ul>
<li>WSDL Mapping</li>
<li>Eccezioni e Fault</li>
<li>Contesto e ciclo di vita</li>
<li>Un esempio riassuntivo</li>
</ul>
</li>
<li>Supporto ai WS in Netbeans
<ul>
<li>il progetto per WS</li>
<li>testing</li>
<li>WS Client</li>
</ul>
</li>
</ul>
<h1 id="materiale-bibliografico-6"><a class="header" href="#materiale-bibliografico-6">Materiale bibliografico</a></h1>
<ul>
<li>"Beginning Java Enterprise Edition": capitolo 14</li>
<li>"A Survey of Web Services Technologies".  Papazoglou, Michael P. and Dubray, Jean-jacques (2004)</li>
</ul>
<h1 id="domande-di-riepilogo-6"><a class="header" href="#domande-di-riepilogo-6">Domande di riepilogo</a></h1>
<ul>
<li>Che cos'e' una Service-Oriented Architecture?</li>
<li>Quali sono i requisiti di un Web Service?</li>
<li>Il ruolo del proxy nel meccanismo di invocazione di un Web Service</li>
<li>Cosa rappresenta il file WSDL?</li>
<li>Che cos'e' SOAP?</li>
<li>Quali sono le gli stili di SOAP binding?</li>
<li>Quando UDDI risulta opzionale?</li>
<li>Come vengono gestite le eccezioni nei WS?</li>
<li>Come si scrive un WebService in Java?</li>
<li>A cosa servono le annotazioni @WebMethod, @WebResult, @WebParam?</li>
<li>Quali sono le differenze tra la serializzazione classiche e quella di JAXB?</li>
<li>A cosa servere avere un WebService come EJB Stateless?</li>
</ul>
<div style="break-before: page; page-break-before: always;"></div><ul>
<li><a href="08-ws.html#contenuti">Contenuti</a></li>
<li><a href="08-ws.html#materiale-bibliografico">Materiale bibliografico</a></li>
<li><a href="08-ws.html#domande-di-riepilogo">Domande di riepilogo</a></li>
</ul>
<h1 id="contenuti-10"><a class="header" href="#contenuti-10">Contenuti</a></h1>
<p><em>Parte 1</em></p>
<ul>
<li>Service-Oriented Architecture</li>
<li>I Web Services
<ul>
<li>Definizioni</li>
<li>I ruoli nei WS</li>
</ul>
</li>
<li>Gli standard
<ul>
<li>WSDL</li>
<li>SOAP</li>
<li>UDDI</li>
</ul>
</li>
<li>Le specifiche di WS</li>
</ul>
<p><em>Parte 2</em></p>
<ul>
<li>WS in Java
<ul>
<li>WSDL Mapping</li>
<li>Eccezioni e Fault</li>
<li>Contesto e ciclo di vita</li>
<li>Un esempio riassuntivo</li>
</ul>
</li>
<li>Supporto ai WS in Netbeans
<ul>
<li>il progetto per WS</li>
<li>testing</li>
<li>WS Client</li>
</ul>
</li>
</ul>
<h1 id="materiale-bibliografico-7"><a class="header" href="#materiale-bibliografico-7">Materiale bibliografico</a></h1>
<ul>
<li>"Beginning Java Enterprise Edition": capitolo 14</li>
<li>"A Survey of Web Services Technologies".  Papazoglou, Michael P. and Dubray, Jean-jacques (2004)</li>
</ul>
<h1 id="domande-di-riepilogo-7"><a class="header" href="#domande-di-riepilogo-7">Domande di riepilogo</a></h1>
<ul>
<li>Che cos'e' una Service-Oriented Architecture?</li>
<li>Quali sono i requisiti di un Web Service?</li>
<li>Il ruolo del proxy nel meccanismo di invocazione di un Web Service</li>
<li>Cosa rappresenta il file WSDL?</li>
<li>Che cos'e' SOAP?</li>
<li>Quali sono le gli stili di SOAP binding?</li>
<li>Quando UDDI risulta opzionale?</li>
<li>Come vengono gestite le eccezioni nei WS?</li>
<li>Come si scrive un WebService in Java?</li>
<li>A cosa servono le annotazioni @WebMethod, @WebResult, @WebParam?</li>
<li>Quali sono le differenze tra la serializzazione classiche e quella di JAXB?</li>
<li>A cosa servere avere un WebService come EJB Stateless?</li>
</ul>
<div style="break-before: page; page-break-before: always;"></div><ul>
<li><a href="09-ws-lab.html#esercizio-0---card-validator">Esercizio 0 - Card Validator</a></li>
<li><a href="09-ws-lab.html#esercizio-1---previsioni-meteo">Esercizio 1 - Previsioni Meteo</a></li>
<li><a href="09-ws-lab.html#esercizio-2---web-service-previsioni-meteo-avanzate">Esercizio 2 - Web Service Previsioni Meteo Avanzate</a></li>
<li><a href="09-ws-lab.html#esercizio-3---pdtify--%EF%B8%8F">Esercizio 3 - PDtify üéµ ‚èØÔ∏è</a></li>
</ul>
<h1 id="esercizio-0---card-validator"><a class="header" href="#esercizio-0---card-validator">Esercizio 0 - Card Validator</a></h1>
<ul>
<li>
<p>New project ‚û°Ô∏è Java with Ant ‚û°Ô∏è Java Web ‚û°Ô∏è Web Application: <code>CardValidatorWebApplication</code></p>
</li>
<li>
<p>Definiamo un nuovo oggetto <code>Card</code> utilizzando JAXB (Java Architecture for XML Binding)</p>
<pre><code class="language-java">@XmlRootElement
@XmlAccessorType(XmlAccessType.FIELD)
public class CreditCard {
    @XmlAttribute(required = true)
    private String number;
    private String expiryDate;
    private Integer controlNumber; 
    private String type;
    // Constructors , getters , setters
}
</code></pre>
</li>
<li>
<p>Definiamo una nuova interfaccia <code>Validator</code></p>
<pre><code class="language-java">  @WebService
  public interface Validator {
      public boolean validate(CreditCard creditCard); 
  }
</code></pre>
</li>
<li>
<p>Definiamo un nuovo Web Service <code>CardValidator</code> che implementa un interfaccia <code>Validator</code></p>
<ul>
<li>New Files ... ‚û°Ô∏è Web Services ‚û°Ô∏è Web Service</li>
<li><em>Name</em> : <code>CardValidator</code></li>
<li><em>Implement Web Service as Stateless Session Beans</em>: [‚úîÔ∏è]</li>
</ul>
</li>
</ul>
<pre><code class="language-java">@WebService(serviceName = "CardValidator")
public class CardValidator implements Validator {
    public boolean validate(CreditCard creditCard) {
        Character lastDigit = creditCard.getNumber().charAt( creditCard.getNumber().length() - 1);
        if (Integer.parseInt(lastDigit.toString()) % 2 == 0) {
             return true;
        } else {
                 return false; 
                }
    }    
}
</code></pre>
<ul>
<li><strong>Testing</strong>: Project ‚û°Ô∏è Web Services ‚û°Ô∏è <code>Card Validator</code>‚û°Ô∏è Test Web Service</li>
<li>Aggiungere al Web Service <code>Card Validator</code> un nuovo metodo <code>validatedata</code>che prende come parametri tutti i campi di <code>Card</code>singolarmente e utilizza <code>validate</code> restituire una stringa <code>valid| not valid</code>.
<ul>
<li>utilizzare il wizard di netbeans per aggungere il metodo  Project ‚û°Ô∏è Web Services ‚û°Ô∏è <code>Card Validator</code>‚û°Ô∏è Add Operation ...</li>
<li>successivamente modificare il codice come segue:
<pre><code class="language-java">public String validatedata(String number, String expiryDate, Integer controlNumber, String type) {
    Character lastDigit = number.charAt( number.length() - 1);
    if (validate(new CreditCard(number, expiryDate, controlNumber,type))) {
         return "valid"; 
    } else {
             return "not valid"; 
            }
}    
</code></pre>
</li>
</ul>
</li>
<li>Definire un nuovo Web Service Client
<ul>
<li>New Project ‚û°Ô∏è Jav with Ant ‚û°Ô∏è Java Application</li>
<li><em>Nome</em>: <code>ValidateWSClient</code></li>
<li>Project ‚û°Ô∏è New Web Service Client
<ul>
<li>Project ‚û°Ô∏è Browse ...</li>
<li><code>CardValidatorWebApplication</code> ‚û°Ô∏è <code>CardValidator</code></li>
<li>Visualizzare i file generati in <code>Generated Sources (jax-ws)</code></li>
<li>Definire l'oggetto <code>ValidateWSClient</code> come segue:
<pre><code class="language-java">public class ValidateWSClient {

    public static void main(String[] args) {
        CardValidator_Service service = new CardValidator_Service();
        CardValidator port = service.getCardValidatorPort();
        CreditCard card = new CreditCard();
        card.setNumber("6011111111111118");
        System.out.println(port.validate(card));
        
    }
    
}
</code></pre>
</li>
</ul>
</li>
</ul>
</li>
</ul>
<h1 id="esercizio-1---previsioni-meteo"><a class="header" href="#esercizio-1---previsioni-meteo">Esercizio 1 - Previsioni Meteo</a></h1>
<p>Scrivere un servizio Web Service che implementa un servizio di previsioni meteo. Il servizio
implementa un servizio <code>forecast()</code> che prende in input una stringa con il nome del luogo
in cui fare previsione (ad esempio ‚ÄúSalerno‚Äù o ‚ÄúFisciano‚Äù), e restituisce una stringa con la
previsione (ad esempio ‚Äúsole‚Äù, ‚Äúpioggia‚Äù, ‚Äúneve‚Äù, ‚Äúnebbia‚Äù). L‚Äôimplementazione del servizio
restituisce sempre ‚Äúsole‚Äù se l‚Äôinput √® ‚ÄúSalerno‚Äù, ‚Äúpioggia‚Äù se l‚Äôinput √® ‚ÄúFisciano‚Äù, oppure un
valore casuale se l‚Äôinput √® diverso.</p>
<p>Implementare un client Java che richiede il servizio di previsioni per diverse localit√†, e le
stampa a video.</p>
<h1 id="esercizio-2---web-service-previsioni-meteo-avanzate"><a class="header" href="#esercizio-2---web-service-previsioni-meteo-avanzate">Esercizio 2 - Web Service Previsioni Meteo Avanzate</a></h1>
<p>Aggiungere al Web Service dell‚Äôesercizio precedente una funzionalit√† chiamata
<code>advancedForecast()</code> che prende in input un oggetto <code>Place</code> con i seguenti attributi:</p>
<ul>
<li>Stringa con nome del posto</li>
<li>Coordinate GPS</li>
</ul>
<p>e restituisce un oggetto Forecast con i seguenti attributi:</p>
<ul>
<li>Stringa con la descrizione della previsione</li>
<li>Temperatura</li>
<li>Direzione del vento</li>
<li>Forza del vento</li>
<li>Umidit√†</li>
</ul>
<p>I valori in output posso essere casuali. Implementare un client Java che richiede il servizio di previsioni avanzato per diverse localit√†, e le visualizza su standard output.</p>
<h1 id="esercizio-3---pdtify---2"><a class="header" href="#esercizio-3---pdtify---2">Esercizio 3 - PDtify üéµ ‚èØÔ∏è</a></h1>
<p>Modificare il progetto PDtify per offrire  le funzionalit√† di MusicLibrary utilizzando anche un Web Service.
Sviluppare un client java che permette di eseguire tutte le funzionalit√† di PDtify e per eseguire il play di una canzone utilizzare il seguente esempio.</p>
<pre><code class="language-java">public class TestOpenBrowser {
    public static void main(String[] args) {
         String url = "https://www.youtube.com/embed/lLGLUSzzuWU";

        if(Desktop.isDesktopSupported()){
            Desktop desktop = Desktop.getDesktop();
            try {
                desktop.browse(new URI(url));
            } catch (IOException | URISyntaxException e) {
                // TODO Auto-generated catch block
                e.printStackTrace();
            }
        }else{
            Runtime runtime = Runtime.getRuntime();
            try {
                runtime.exec("xdg-open " + url);
            } catch (IOException e) {
                // TODO Auto-generated catch block
                e.printStackTrace();
            }
        }
    }
    
}

</code></pre>

                    </main>

                    <nav class="nav-wrapper" aria-label="Page navigation">
                        <!-- Mobile navigation buttons -->


                        <div style="clear: both"></div>
                    </nav>
                </div>
            </div>

            <nav class="nav-wide-wrapper" aria-label="Page navigation">

            </nav>

        </div>




        <script>
            window.playground_copyable = true;
        </script>


        <script src="elasticlunr.min.js"></script>
        <script src="mark.min.js"></script>
        <script src="searcher.js"></script>

        <script src="clipboard.min.js"></script>
        <script src="highlight.js"></script>
        <script src="book.js"></script>

        <!-- Custom JS scripts -->

        <script>
        window.addEventListener('load', function() {
            window.setTimeout(window.print, 100);
        });
        </script>

    </div>
    </body>
</html>
